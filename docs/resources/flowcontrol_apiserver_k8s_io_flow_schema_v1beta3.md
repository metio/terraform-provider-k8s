---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_flowcontrol_apiserver_k8s_io_flow_schema_v1beta3 Resource - terraform-provider-k8s"
subcategory: "flowcontrol.apiserver.k8s.io/v1beta3"
description: |-
  FlowSchema defines the schema of a group of flows. Note that a flow is made up of a set of inbound API requests with similar attributes and is identified by a pair of strings: the name of the FlowSchema and a 'flow distinguisher'.
---

# k8s_flowcontrol_apiserver_k8s_io_flow_schema_v1beta3 (Resource)

FlowSchema defines the schema of a group of flows. Note that a flow is made up of a set of inbound API requests with similar attributes and is identified by a pair of strings: the name of the FlowSchema and a 'flow distinguisher'.

## Example Usage

```terraform
resource "k8s_flowcontrol_apiserver_k8s_io_flow_schema_v1beta3" "minimal" {
  metadata = {
    name = "test"
  }
}

resource "k8s_flowcontrol_apiserver_k8s_io_flow_schema_v1beta3" "example" {
  metadata = {
    name = "health-for-strangers"
  }
  spec = {
    matching_precedence = 1000
    priority_level_configuration = {
      name = "exempt"
    }
    rules = [
      {
        non_resource_rules = [
          {
            non_resource_urls = ["/healthz", "/livez", "/readyz"]
            verbs             = ["*"]
          }
        ]
        subjects = [
          {
            kind = "Group"
            group = {
              name = "system:unauthenticated"
            }
          }
        ]
      }
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) FlowSchemaSpec describes how the FlowSchema's specification looks like. (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `api_version` (String) APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
- `id` (Number) The timestamp of the last change to this resource.
- `kind` (String) Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `priority_level_configuration` (Attributes) PriorityLevelConfigurationReference contains information that points to the 'request-priority' being used. (see [below for nested schema](#nestedatt--spec--priority_level_configuration))

Optional:

- `distinguisher_method` (Attributes) FlowDistinguisherMethod specifies the method of a flow distinguisher. (see [below for nested schema](#nestedatt--spec--distinguisher_method))
- `matching_precedence` (Number) 'matchingPrecedence' is used to choose among the FlowSchemas that match a given request. The chosen FlowSchema is among those with the numerically lowest (which we take to be logically highest) MatchingPrecedence.  Each MatchingPrecedence value must be ranged in [1,10000]. Note that if the precedence is not specified, it will be set to 1000 as default.
- `rules` (Attributes List) 'rules' describes which requests will match this flow schema. This FlowSchema matches a request if and only if at least one member of rules matches the request. if it is an empty slice, there will be no requests matching the FlowSchema. (see [below for nested schema](#nestedatt--spec--rules))

<a id="nestedatt--spec--priority_level_configuration"></a>
### Nested Schema for `spec.priority_level_configuration`

Required:

- `name` (String) 'name' is the name of the priority level configuration being referenced Required.


<a id="nestedatt--spec--distinguisher_method"></a>
### Nested Schema for `spec.distinguisher_method`

Required:

- `type` (String) 'type' is the type of flow distinguisher method The supported types are 'ByUser' and 'ByNamespace'. Required.


<a id="nestedatt--spec--rules"></a>
### Nested Schema for `spec.rules`

Required:

- `subjects` (Attributes List) subjects is the list of normal user, serviceaccount, or group that this rule cares about. There must be at least one member in this slice. A slice that includes both the system:authenticated and system:unauthenticated user groups matches every request. Required. (see [below for nested schema](#nestedatt--spec--rules--subjects))

Optional:

- `non_resource_rules` (Attributes List) 'nonResourceRules' is a list of NonResourcePolicyRules that identify matching requests according to their verb and the target non-resource URL. (see [below for nested schema](#nestedatt--spec--rules--non_resource_rules))
- `resource_rules` (Attributes List) 'resourceRules' is a slice of ResourcePolicyRules that identify matching requests according to their verb and the target resource. At least one of 'resourceRules' and 'nonResourceRules' has to be non-empty. (see [below for nested schema](#nestedatt--spec--rules--resource_rules))

<a id="nestedatt--spec--rules--subjects"></a>
### Nested Schema for `spec.rules.subjects`

Required:

- `kind` (String) 'kind' indicates which one of the other fields is non-empty. Required

Optional:

- `group` (Attributes) GroupSubject holds detailed information for group-kind subject. (see [below for nested schema](#nestedatt--spec--rules--subjects--group))
- `service_account` (Attributes) ServiceAccountSubject holds detailed information for service-account-kind subject. (see [below for nested schema](#nestedatt--spec--rules--subjects--service_account))
- `user` (Attributes) UserSubject holds detailed information for user-kind subject. (see [below for nested schema](#nestedatt--spec--rules--subjects--user))

<a id="nestedatt--spec--rules--subjects--group"></a>
### Nested Schema for `spec.rules.subjects.user`

Required:

- `name` (String) name is the user group that matches, or '*' to match all user groups. See https://github.com/kubernetes/apiserver/blob/master/pkg/authentication/user/user.go for some well-known group names. Required.


<a id="nestedatt--spec--rules--subjects--service_account"></a>
### Nested Schema for `spec.rules.subjects.user`

Required:

- `name` (String) 'name' is the name of matching ServiceAccount objects, or '*' to match regardless of name. Required.
- `namespace` (String) 'namespace' is the namespace of matching ServiceAccount objects. Required.


<a id="nestedatt--spec--rules--subjects--user"></a>
### Nested Schema for `spec.rules.subjects.user`

Required:

- `name` (String) 'name' is the username that matches, or '*' to match all usernames. Required.



<a id="nestedatt--spec--rules--non_resource_rules"></a>
### Nested Schema for `spec.rules.non_resource_rules`

Required:

- `non_resource_urls` (List of String) 'nonResourceURLs' is a set of url prefixes that a user should have access to and may not be empty. For example:  - '/healthz' is legal  - '/hea*' is illegal  - '/hea' is legal but matches nothing  - '/hea/*' also matches nothing  - '/healthz/*' matches all per-component health checks.'*' matches all non-resource urls. if it is present, it must be the only entry. Required.
- `verbs` (List of String) 'verbs' is a list of matching verbs and may not be empty. '*' matches all verbs. If it is present, it must be the only entry. Required.


<a id="nestedatt--spec--rules--resource_rules"></a>
### Nested Schema for `spec.rules.resource_rules`

Required:

- `api_groups` (List of String) 'apiGroups' is a list of matching API groups and may not be empty. '*' matches all API groups and, if present, must be the only entry. Required.
- `resources` (List of String) 'resources' is a list of matching resources (i.e., lowercase and plural) with, if desired, subresource.  For example, [ 'services', 'nodes/status' ].  This list may not be empty. '*' matches all resources and, if present, must be the only entry. Required.
- `verbs` (List of String) 'verbs' is a list of matching verbs and may not be empty. '*' matches all verbs and, if present, must be the only entry. Required.

Optional:

- `cluster_scope` (Boolean) 'clusterScope' indicates whether to match requests that do not specify a namespace (which happens either because the resource is not namespaced or the request targets all namespaces). If this field is omitted or false then the 'namespaces' field must contain a non-empty list.
- `namespaces` (List of String) 'namespaces' is a list of target namespaces that restricts matches.  A request that specifies a target namespace matches only if either (a) this list contains that target namespace or (b) this list contains '*'.  Note that '*' matches any specified namespace but does not match a request that _does not specify_ a namespace (see the 'clusterScope' field for that). This list may be empty, but only if 'clusterScope' is true.


