---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_resources_teleport_dev_teleport_role_v5 Resource - terraform-provider-k8s"
subcategory: "resources.teleport.dev"
description: |-
  Role is the Schema for the roles API
---

# k8s_resources_teleport_dev_teleport_role_v5 (Resource)

Role is the Schema for the roles API

## Example Usage

```terraform
resource "k8s_resources_teleport_dev_teleport_role_v5" "minimal" {
  metadata = {
    name = "test"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) Role resource definition v5 from Teleport (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `api_version` (String) APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
- `id` (Number) The timestamp of the last change to this resource.
- `kind` (String) Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Optional:

- `allow` (Attributes) Allow is the set of conditions evaluated to grant access. (see [below for nested schema](#nestedatt--spec--allow))
- `deny` (Attributes) Deny is the set of conditions evaluated to deny access. Deny takes priority over allow. (see [below for nested schema](#nestedatt--spec--deny))
- `options` (Attributes) Options is for OpenSSH options like agent forwarding. (see [below for nested schema](#nestedatt--spec--options))

<a id="nestedatt--spec--allow"></a>
### Nested Schema for `spec.allow`

Optional:

- `app_labels` (Map of String) AppLabels is a map of labels used as part of the RBAC system.
- `aws_role_arns` (List of String) AWSRoleARNs is a list of AWS role ARNs this role is allowed to assume.
- `cluster_labels` (Map of String) ClusterLabels is a map of node labels (used to dynamically grant access to clusters).
- `db_labels` (Map of String) DatabaseLabels are used in RBAC system to allow/deny access to databases.
- `db_names` (List of String) DatabaseNames is a list of database names this role is allowed to connect to.
- `db_users` (List of String) DatabaseUsers is a list of databaes users this role is allowed to connect as.
- `host_groups` (List of String) HostGroups is a list of groups for created users to be added to
- `host_sudoers` (List of String) HostSudoers is a list of entries to include in a users sudoer file
- `impersonate` (Attributes) Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means. (see [below for nested schema](#nestedatt--spec--allow--impersonate))
- `join_sessions` (Attributes List) JoinSessions specifies policies to allow users to join other sessions. (see [below for nested schema](#nestedatt--spec--allow--join_sessions))
- `kubernetes_groups` (List of String) KubeGroups is a list of kubernetes groups
- `kubernetes_labels` (Map of String) KubernetesLabels is a map of kubernetes cluster labels used for RBAC.
- `kubernetes_users` (List of String) KubeUsers is an optional kubernetes users to impersonate
- `logins` (List of String) Logins is a list of *nix system logins.
- `node_labels` (Map of String) NodeLabels is a map of node labels (used to dynamically grant access to nodes).
- `request` (Attributes) (see [below for nested schema](#nestedatt--spec--allow--request))
- `require_session_join` (Attributes List) RequireSessionJoin specifies policies for required users to start a session. (see [below for nested schema](#nestedatt--spec--allow--require_session_join))
- `review_requests` (Attributes) ReviewRequests defines conditions for submitting access reviews. (see [below for nested schema](#nestedatt--spec--allow--review_requests))
- `rules` (Attributes List) Rules is a list of rules and their access levels. Rules are a high level construct used for access control. (see [below for nested schema](#nestedatt--spec--allow--rules))
- `windows_desktop_labels` (Map of String) WindowsDesktopLabels are used in the RBAC system to allow/deny access to Windows desktops.
- `windows_desktop_logins` (List of String) WindowsDesktopLogins is a list of desktop login names allowed/denied for Windows desktops.

<a id="nestedatt--spec--allow--impersonate"></a>
### Nested Schema for `spec.allow.impersonate`

Optional:

- `roles` (List of String) Roles is a list of resources this role is allowed to impersonate
- `users` (List of String) Users is a list of resources this role is allowed to impersonate, could be an empty list or a Wildcard pattern
- `where` (String) Where specifies optional advanced matcher


<a id="nestedatt--spec--allow--join_sessions"></a>
### Nested Schema for `spec.allow.join_sessions`

Optional:

- `kinds` (List of String) Kinds are the session kinds this policy applies to.
- `modes` (List of String) Modes is a list of permitted participant modes for this policy.
- `name` (String) Name is the name of the policy.
- `roles` (List of String) Roles is a list of roles that you can join the session of.


<a id="nestedatt--spec--allow--request"></a>
### Nested Schema for `spec.allow.request`

Optional:

- `annotations` (Map of List of String) Annotations is a collection of annotations to be programmatically appended to pending access requests at the time of their creation. These annotations serve as a mechanism to propagate extra information to plugins.  Since these annotations support variable interpolation syntax, they also offer a mechanism for forwarding claims from an external identity provider, to a plugin via '{{external.trait_name}}' style substitutions.
- `claims_to_roles` (Attributes List) ClaimsToRoles specifies a mapping from claims (traits) to teleport roles. (see [below for nested schema](#nestedatt--spec--allow--request--claims_to_roles))
- `roles` (List of String) Roles is the name of roles which will match the request rule.
- `search_as_roles` (List of String) SearchAsRoles is a list of roles which the user should be able to 'assume' while searching for resources, and should be able to request with a search-based access request.
- `suggested_reviewers` (List of String) SuggestedReviewers is a list of reviewer suggestions.  These can be teleport usernames, but that is not a requirement.
- `thresholds` (Attributes List) Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used. (see [below for nested schema](#nestedatt--spec--allow--request--thresholds))

<a id="nestedatt--spec--allow--request--claims_to_roles"></a>
### Nested Schema for `spec.allow.request.thresholds`

Optional:

- `claim` (String) Claim is a claim name.
- `roles` (List of String) Roles is a list of static teleport roles to match.
- `value` (String) Value is a claim value to match.


<a id="nestedatt--spec--allow--request--thresholds"></a>
### Nested Schema for `spec.allow.request.thresholds`

Optional:

- `approve` (Number) Approve is the number of matching approvals needed for state-transition.
- `deny` (Number) Deny is the number of denials needed for state-transition.
- `filter` (String) Filter is an optional predicate used to determine which reviews count toward this threshold.
- `name` (String) Name is the optional human-readable name of the threshold.



<a id="nestedatt--spec--allow--require_session_join"></a>
### Nested Schema for `spec.allow.require_session_join`

Optional:

- `count` (Number) Count is the amount of people that need to be matched for this policy to be fulfilled.
- `filter` (String) Filter is a predicate that determines what users count towards this policy.
- `kinds` (List of String) Kinds are the session kinds this policy applies to.
- `modes` (List of String) Modes is the list of modes that may be used to fulfill this policy.
- `name` (String) Name is the name of the policy.
- `on_leave` (String) OnLeave is the behaviour that's used when the policy is no longer fulfilled for a live session.


<a id="nestedatt--spec--allow--review_requests"></a>
### Nested Schema for `spec.allow.review_requests`

Optional:

- `claims_to_roles` (Attributes List) ClaimsToRoles specifies a mapping from claims (traits) to teleport roles. (see [below for nested schema](#nestedatt--spec--allow--review_requests--claims_to_roles))
- `roles` (List of String) Roles is the name of roles which may be reviewed.
- `where` (String) Where is an optional predicate which further limits which requests are reviewable.

<a id="nestedatt--spec--allow--review_requests--claims_to_roles"></a>
### Nested Schema for `spec.allow.review_requests.where`

Optional:

- `claim` (String) Claim is a claim name.
- `roles` (List of String) Roles is a list of static teleport roles to match.
- `value` (String) Value is a claim value to match.



<a id="nestedatt--spec--allow--rules"></a>
### Nested Schema for `spec.allow.rules`

Optional:

- `actions` (List of String) Actions specifies optional actions taken when this rule matches
- `resources` (List of String) Resources is a list of resources
- `verbs` (List of String) Verbs is a list of verbs
- `where` (String) Where specifies optional advanced matcher



<a id="nestedatt--spec--deny"></a>
### Nested Schema for `spec.deny`

Optional:

- `app_labels` (Map of String) AppLabels is a map of labels used as part of the RBAC system.
- `aws_role_arns` (List of String) AWSRoleARNs is a list of AWS role ARNs this role is allowed to assume.
- `cluster_labels` (Map of String) ClusterLabels is a map of node labels (used to dynamically grant access to clusters).
- `db_labels` (Map of String) DatabaseLabels are used in RBAC system to allow/deny access to databases.
- `db_names` (List of String) DatabaseNames is a list of database names this role is allowed to connect to.
- `db_users` (List of String) DatabaseUsers is a list of databaes users this role is allowed to connect as.
- `host_groups` (List of String) HostGroups is a list of groups for created users to be added to
- `host_sudoers` (List of String) HostSudoers is a list of entries to include in a users sudoer file
- `impersonate` (Attributes) Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means. (see [below for nested schema](#nestedatt--spec--deny--impersonate))
- `join_sessions` (Attributes List) JoinSessions specifies policies to allow users to join other sessions. (see [below for nested schema](#nestedatt--spec--deny--join_sessions))
- `kubernetes_groups` (List of String) KubeGroups is a list of kubernetes groups
- `kubernetes_labels` (Map of String) KubernetesLabels is a map of kubernetes cluster labels used for RBAC.
- `kubernetes_users` (List of String) KubeUsers is an optional kubernetes users to impersonate
- `logins` (List of String) Logins is a list of *nix system logins.
- `node_labels` (Map of String) NodeLabels is a map of node labels (used to dynamically grant access to nodes).
- `request` (Attributes) (see [below for nested schema](#nestedatt--spec--deny--request))
- `require_session_join` (Attributes List) RequireSessionJoin specifies policies for required users to start a session. (see [below for nested schema](#nestedatt--spec--deny--require_session_join))
- `review_requests` (Attributes) ReviewRequests defines conditions for submitting access reviews. (see [below for nested schema](#nestedatt--spec--deny--review_requests))
- `rules` (Attributes List) Rules is a list of rules and their access levels. Rules are a high level construct used for access control. (see [below for nested schema](#nestedatt--spec--deny--rules))
- `windows_desktop_labels` (Map of String) WindowsDesktopLabels are used in the RBAC system to allow/deny access to Windows desktops.
- `windows_desktop_logins` (List of String) WindowsDesktopLogins is a list of desktop login names allowed/denied for Windows desktops.

<a id="nestedatt--spec--deny--impersonate"></a>
### Nested Schema for `spec.deny.impersonate`

Optional:

- `roles` (List of String) Roles is a list of resources this role is allowed to impersonate
- `users` (List of String) Users is a list of resources this role is allowed to impersonate, could be an empty list or a Wildcard pattern
- `where` (String) Where specifies optional advanced matcher


<a id="nestedatt--spec--deny--join_sessions"></a>
### Nested Schema for `spec.deny.join_sessions`

Optional:

- `kinds` (List of String) Kinds are the session kinds this policy applies to.
- `modes` (List of String) Modes is a list of permitted participant modes for this policy.
- `name` (String) Name is the name of the policy.
- `roles` (List of String) Roles is a list of roles that you can join the session of.


<a id="nestedatt--spec--deny--request"></a>
### Nested Schema for `spec.deny.request`

Optional:

- `annotations` (Map of List of String) Annotations is a collection of annotations to be programmatically appended to pending access requests at the time of their creation. These annotations serve as a mechanism to propagate extra information to plugins.  Since these annotations support variable interpolation syntax, they also offer a mechanism for forwarding claims from an external identity provider, to a plugin via '{{external.trait_name}}' style substitutions.
- `claims_to_roles` (Attributes List) ClaimsToRoles specifies a mapping from claims (traits) to teleport roles. (see [below for nested schema](#nestedatt--spec--deny--request--claims_to_roles))
- `roles` (List of String) Roles is the name of roles which will match the request rule.
- `search_as_roles` (List of String) SearchAsRoles is a list of roles which the user should be able to 'assume' while searching for resources, and should be able to request with a search-based access request.
- `suggested_reviewers` (List of String) SuggestedReviewers is a list of reviewer suggestions.  These can be teleport usernames, but that is not a requirement.
- `thresholds` (Attributes List) Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used. (see [below for nested schema](#nestedatt--spec--deny--request--thresholds))

<a id="nestedatt--spec--deny--request--claims_to_roles"></a>
### Nested Schema for `spec.deny.request.thresholds`

Optional:

- `claim` (String) Claim is a claim name.
- `roles` (List of String) Roles is a list of static teleport roles to match.
- `value` (String) Value is a claim value to match.


<a id="nestedatt--spec--deny--request--thresholds"></a>
### Nested Schema for `spec.deny.request.thresholds`

Optional:

- `approve` (Number) Approve is the number of matching approvals needed for state-transition.
- `deny` (Number) Deny is the number of denials needed for state-transition.
- `filter` (String) Filter is an optional predicate used to determine which reviews count toward this threshold.
- `name` (String) Name is the optional human-readable name of the threshold.



<a id="nestedatt--spec--deny--require_session_join"></a>
### Nested Schema for `spec.deny.require_session_join`

Optional:

- `count` (Number) Count is the amount of people that need to be matched for this policy to be fulfilled.
- `filter` (String) Filter is a predicate that determines what users count towards this policy.
- `kinds` (List of String) Kinds are the session kinds this policy applies to.
- `modes` (List of String) Modes is the list of modes that may be used to fulfill this policy.
- `name` (String) Name is the name of the policy.
- `on_leave` (String) OnLeave is the behaviour that's used when the policy is no longer fulfilled for a live session.


<a id="nestedatt--spec--deny--review_requests"></a>
### Nested Schema for `spec.deny.review_requests`

Optional:

- `claims_to_roles` (Attributes List) ClaimsToRoles specifies a mapping from claims (traits) to teleport roles. (see [below for nested schema](#nestedatt--spec--deny--review_requests--claims_to_roles))
- `roles` (List of String) Roles is the name of roles which may be reviewed.
- `where` (String) Where is an optional predicate which further limits which requests are reviewable.

<a id="nestedatt--spec--deny--review_requests--claims_to_roles"></a>
### Nested Schema for `spec.deny.review_requests.where`

Optional:

- `claim` (String) Claim is a claim name.
- `roles` (List of String) Roles is a list of static teleport roles to match.
- `value` (String) Value is a claim value to match.



<a id="nestedatt--spec--deny--rules"></a>
### Nested Schema for `spec.deny.rules`

Optional:

- `actions` (List of String) Actions specifies optional actions taken when this rule matches
- `resources` (List of String) Resources is a list of resources
- `verbs` (List of String) Verbs is a list of verbs
- `where` (String) Where specifies optional advanced matcher



<a id="nestedatt--spec--options"></a>
### Nested Schema for `spec.options`

Optional:

- `cert_extensions` (Attributes List) CertExtensions specifies the key/values (see [below for nested schema](#nestedatt--spec--options--cert_extensions))
- `cert_format` (String) CertificateFormat defines the format of the user certificate to allow compatibility with older versions of OpenSSH.
- `client_idle_timeout` (String) ClientIdleTimeout sets disconnect clients on idle timeout behavior, if set to 0 means do not disconnect, otherwise is set to the idle duration.
- `create_host_user` (Boolean) CreateHostUser allows users to be automatically created on a host
- `desktop_clipboard` (Boolean) DesktopClipboard indicates whether clipboard sharing is allowed between the user's workstation and the remote desktop. It defaults to true unless explicitly set to false.
- `desktop_directory_sharing` (Boolean) DesktopDirectorySharing indicates whether directory sharing is allowed between the user's workstation and the remote desktop. It defaults to false unless explicitly set to true.
- `disconnect_expired_cert` (Boolean) DisconnectExpiredCert sets disconnect clients on expired certificates.
- `enhanced_recording` (List of String) BPF defines what events to record for the BPF-based session recorder.
- `forward_agent` (Boolean) ForwardAgent is SSH agent forwarding.
- `lock` (String) Lock specifies the locking mode (strict|best_effort) to be applied with the role.
- `max_connections` (Number) MaxConnections defines the maximum number of concurrent connections a user may hold.
- `max_kubernetes_connections` (Number) MaxKubernetesConnections defines the maximum number of concurrent Kubernetes sessions a user may hold.
- `max_session_ttl` (String) MaxSessionTTL defines how long a SSH session can last for.
- `max_sessions` (Number) MaxSessions defines the maximum number of concurrent sessions per connection.
- `permit_x11_forwarding` (Boolean) PermitX11Forwarding authorizes use of X11 forwarding.
- `pin_source_ip` (Boolean) PinSourceIP forces the same client IP for certificate generation and usage
- `port_forwarding` (Boolean) PortForwarding defines if the certificate will have 'permit-port-forwarding' in the certificate. PortForwarding is 'yes' if not set, that's why this is a pointer
- `record_session` (Attributes) RecordDesktopSession indicates whether desktop access sessions should be recorded. It defaults to true unless explicitly set to false. (see [below for nested schema](#nestedatt--spec--options--record_session))
- `request_access` (String) RequestAccess defines the access request stategy (optional|note|always) where optional is the default.
- `request_prompt` (String) RequestPrompt is an optional message which tells users what they aught to
- `require_session_mfa` (Number) RequireMFAType is the type of MFA requirement enforced for this user.
- `ssh_file_copy` (Boolean) SSHFileCopy indicates whether remote file operations via SCP or SFTP are allowed over an SSH session. It defaults to true unless explicitly set to false.

<a id="nestedatt--spec--options--cert_extensions"></a>
### Nested Schema for `spec.options.cert_extensions`

Optional:

- `mode` (Number) Mode is the type of extension to be used -- currently critical-option is not supported
- `name` (String) Name specifies the key to be used in the cert extension.
- `type` (Number) Type represents the certificate type being extended, only ssh is supported at this time.
- `value` (String) Value specifies the valueg to be used in the cert extension.


<a id="nestedatt--spec--options--record_session"></a>
### Nested Schema for `spec.options.record_session`

Optional:

- `default` (String) Default indicates the default value for the services.
- `desktop` (Boolean) Desktop indicates whether desktop sessions should be recorded. It defaults to true unless explicitly set to false.
- `ssh` (String) SSH indicates the session mode used on SSH sessions.


