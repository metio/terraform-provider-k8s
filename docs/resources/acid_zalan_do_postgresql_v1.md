---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_acid_zalan_do_postgresql_v1 Resource - terraform-provider-k8s"
subcategory: "acid.zalan.do"
description: |-
  
---

# k8s_acid_zalan_do_postgresql_v1 (Resource)



## Example Usage

```terraform
resource "k8s_acid_zalan_do_postgresql_v1" "big" {
  metadata = {
    name      = "test"
    namespace = "some-namespace"
    labels = {
      "test" = "abc"
    }
    annotations = {
      "try" = "this"
    }
  }
  spec = {
    allowed_source_ranges = ["10.0.0.0/8"]
    clone = {
      cluster              = "first-cluster"
      s3_access_key_id     = "123456"
      s3_endpoint          = "s3://eu-central.example.com"
      s3_force_path_style  = true
      s3_secret_access_key = "hunter2 huntering"
      s3_wal_path          = "wals/abc"
      uid                  = "abc"
    }
    databases = {
      "yes" = "no"
    }
    docker_image                     = "hub.docker.com/example/image:version"
    enable_replica_connection_pooler = true
    pod_priority_class_name          = "critical"
    service_annotations = {
      "sidecar.inject" = "true"
    }
    tls = {
      ca_secret_name   = "mystery"
      certificate_file = "cert.pem"
      private_key_file = "private.pem"
      secret_name      = "secret"
      ca_file          = "ca.pem"
    }
    additional_volumes  = []
    number_of_instances = 3
    postgresql = {
      version = "13"
    }
    team_id = "abc"
    volume = {
      storage_class = "gp3"
      selector = {
        match_labels = {
          "app.kubernetes.io/name" = "some-example"
        }
      }
      size = "17G"
    }
  }
}

resource "k8s_acid_zalan_do_postgresql_v1" "small" {
  metadata = {
    name = "test"
  }
  spec = {
    number_of_instances = 3
    postgresql = {
      version = "9.6"
    }
    team_id = "abc"
    volume = {
      storage_class = "gp3"
      selector = {
        match_labels = {
          "app.kubernetes.io/name" = "some-example"
        }
      }
      size = "17G"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))
- `spec` (Attributes) (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `api_version` (String) APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
- `id` (Number) The timestamp of the last change to this resource.
- `kind` (String) Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `number_of_instances` (Number)
- `postgresql` (Attributes) (see [below for nested schema](#nestedatt--spec--postgresql))
- `team_id` (String)
- `volume` (Attributes) (see [below for nested schema](#nestedatt--spec--volume))

Optional:

- `additional_volumes` (Attributes List) (see [below for nested schema](#nestedatt--spec--additional_volumes))
- `allowed_source_ranges` (List of String)
- `clone` (Attributes) (see [below for nested schema](#nestedatt--spec--clone))
- `connection_pooler` (Attributes) (see [below for nested schema](#nestedatt--spec--connection_pooler))
- `databases` (Map of String)
- `docker_image` (String)
- `enable_connection_pooler` (Boolean)
- `enable_logical_backup` (Boolean)
- `enable_master_load_balancer` (Boolean)
- `enable_master_pooler_load_balancer` (Boolean)
- `enable_replica_connection_pooler` (Boolean)
- `enable_replica_load_balancer` (Boolean)
- `enable_replica_pooler_load_balancer` (Boolean)
- `enable_shm_volume` (Boolean)
- `env` (List of Map of String)
- `init_containers` (List of Map of String)
- `logical_backup_schedule` (String)
- `maintenance_windows` (List of String)
- `node_affinity` (Attributes) (see [below for nested schema](#nestedatt--spec--node_affinity))
- `patroni` (Attributes) (see [below for nested schema](#nestedatt--spec--patroni))
- `pod_annotations` (Map of String)
- `pod_priority_class_name` (String)
- `prepared_databases` (Attributes) (see [below for nested schema](#nestedatt--spec--prepared_databases))
- `replica_load_balancer` (Boolean) deprecated
- `resources` (Attributes) (see [below for nested schema](#nestedatt--spec--resources))
- `scheduler_name` (String)
- `service_annotations` (Map of String)
- `sidecars` (List of Map of String)
- `spilo_fs_group` (Number)
- `spilo_run_as_group` (Number)
- `spilo_run_as_user` (Number)
- `standby` (Attributes) (see [below for nested schema](#nestedatt--spec--standby))
- `streams` (Attributes List) (see [below for nested schema](#nestedatt--spec--streams))
- `tls` (Attributes) (see [below for nested schema](#nestedatt--spec--tls))
- `tolerations` (Attributes List) (see [below for nested schema](#nestedatt--spec--tolerations))
- `use_load_balancer` (Boolean) deprecated
- `users` (Map of List of String)
- `users_with_in_place_secret_rotation` (List of String)
- `users_with_secret_rotation` (List of String)

<a id="nestedatt--spec--postgresql"></a>
### Nested Schema for `spec.postgresql`

Required:

- `version` (String)

Optional:

- `parameters` (Map of String)


<a id="nestedatt--spec--volume"></a>
### Nested Schema for `spec.volume`

Required:

- `size` (String)

Optional:

- `iops` (Number)
- `selector` (Attributes) (see [below for nested schema](#nestedatt--spec--volume--selector))
- `storage_class` (String)
- `sub_path` (String)
- `throughput` (Number)

<a id="nestedatt--spec--volume--selector"></a>
### Nested Schema for `spec.volume.selector`

Optional:

- `match_expressions` (Attributes List) (see [below for nested schema](#nestedatt--spec--volume--selector--match_expressions))
- `match_labels` (Dynamic)

<a id="nestedatt--spec--volume--selector--match_expressions"></a>
### Nested Schema for `spec.volume.selector.match_labels`

Required:

- `key` (String)
- `operator` (String)

Optional:

- `values` (List of String)




<a id="nestedatt--spec--additional_volumes"></a>
### Nested Schema for `spec.additional_volumes`

Required:

- `mount_path` (String)
- `name` (String)
- `volume_source` (Dynamic)

Optional:

- `sub_path` (String)
- `target_containers` (List of String)


<a id="nestedatt--spec--clone"></a>
### Nested Schema for `spec.clone`

Required:

- `cluster` (String)

Optional:

- `s3_access_key_id` (String)
- `s3_endpoint` (String)
- `s3_force_path_style` (Boolean)
- `s3_secret_access_key` (String)
- `s3_wal_path` (String)
- `timestamp` (String)
- `uid` (String)


<a id="nestedatt--spec--connection_pooler"></a>
### Nested Schema for `spec.connection_pooler`

Optional:

- `docker_image` (String)
- `max_db_connections` (Number)
- `mode` (String)
- `number_of_instances` (Number)
- `resources` (Attributes) (see [below for nested schema](#nestedatt--spec--connection_pooler--resources))
- `schema` (String)
- `user` (String)

<a id="nestedatt--spec--connection_pooler--resources"></a>
### Nested Schema for `spec.connection_pooler.resources`

Optional:

- `limits` (Attributes) (see [below for nested schema](#nestedatt--spec--connection_pooler--resources--limits))
- `requests` (Attributes) (see [below for nested schema](#nestedatt--spec--connection_pooler--resources--requests))

<a id="nestedatt--spec--connection_pooler--resources--limits"></a>
### Nested Schema for `spec.connection_pooler.resources.requests`

Optional:

- `cpu` (String)
- `memory` (String)


<a id="nestedatt--spec--connection_pooler--resources--requests"></a>
### Nested Schema for `spec.connection_pooler.resources.requests`

Optional:

- `cpu` (String)
- `memory` (String)




<a id="nestedatt--spec--node_affinity"></a>
### Nested Schema for `spec.node_affinity`

Optional:

- `preferred_during_scheduling_ignored_during_execution` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution))
- `required_during_scheduling_ignored_during_execution` (Attributes) (see [below for nested schema](#nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution))

<a id="nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution"></a>
### Nested Schema for `spec.node_affinity.preferred_during_scheduling_ignored_during_execution`

Required:

- `preference` (Attributes) (see [below for nested schema](#nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--preference))
- `weight` (Number)

<a id="nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--preference"></a>
### Nested Schema for `spec.node_affinity.preferred_during_scheduling_ignored_during_execution.weight`

Optional:

- `match_expressions` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--weight--match_expressions))
- `match_fields` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--weight--match_fields))

<a id="nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--weight--match_expressions"></a>
### Nested Schema for `spec.node_affinity.preferred_during_scheduling_ignored_during_execution.weight.match_expressions`

Required:

- `key` (String)
- `operator` (String)

Optional:

- `values` (List of String)


<a id="nestedatt--spec--node_affinity--preferred_during_scheduling_ignored_during_execution--weight--match_fields"></a>
### Nested Schema for `spec.node_affinity.preferred_during_scheduling_ignored_during_execution.weight.match_fields`

Required:

- `key` (String)
- `operator` (String)

Optional:

- `values` (List of String)




<a id="nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution"></a>
### Nested Schema for `spec.node_affinity.required_during_scheduling_ignored_during_execution`

Required:

- `node_selector_terms` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms))

<a id="nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms"></a>
### Nested Schema for `spec.node_affinity.required_during_scheduling_ignored_during_execution.node_selector_terms`

Optional:

- `match_expressions` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms--match_expressions))
- `match_fields` (Attributes List) (see [below for nested schema](#nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms--match_fields))

<a id="nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms--match_expressions"></a>
### Nested Schema for `spec.node_affinity.required_during_scheduling_ignored_during_execution.node_selector_terms.match_expressions`

Required:

- `key` (String)
- `operator` (String)

Optional:

- `values` (List of String)


<a id="nestedatt--spec--node_affinity--required_during_scheduling_ignored_during_execution--node_selector_terms--match_fields"></a>
### Nested Schema for `spec.node_affinity.required_during_scheduling_ignored_during_execution.node_selector_terms.match_fields`

Required:

- `key` (String)
- `operator` (String)

Optional:

- `values` (List of String)





<a id="nestedatt--spec--patroni"></a>
### Nested Schema for `spec.patroni`

Optional:

- `initdb` (Map of String)
- `loop_wait` (Number)
- `maximum_lag_on_failover` (Number)
- `pg_hba` (List of String)
- `retry_timeout` (Number)
- `slots` (Map of Map of String)
- `synchronous_mode` (Boolean)
- `synchronous_mode_strict` (Boolean)
- `synchronous_node_count` (Number)
- `ttl` (Number)


<a id="nestedatt--spec--prepared_databases"></a>
### Nested Schema for `spec.prepared_databases`

Optional:

- `default_users` (Boolean)
- `extensions` (Map of String)
- `schemas` (Attributes) (see [below for nested schema](#nestedatt--spec--prepared_databases--schemas))
- `secret_namespace` (String)

<a id="nestedatt--spec--prepared_databases--schemas"></a>
### Nested Schema for `spec.prepared_databases.schemas`

Optional:

- `default_roles` (Boolean)
- `default_users` (Boolean)



<a id="nestedatt--spec--resources"></a>
### Nested Schema for `spec.resources`

Optional:

- `limits` (Attributes) (see [below for nested schema](#nestedatt--spec--resources--limits))
- `requests` (Attributes) (see [below for nested schema](#nestedatt--spec--resources--requests))

<a id="nestedatt--spec--resources--limits"></a>
### Nested Schema for `spec.resources.limits`

Optional:

- `cpu` (String)
- `memory` (String)


<a id="nestedatt--spec--resources--requests"></a>
### Nested Schema for `spec.resources.requests`

Optional:

- `cpu` (String)
- `memory` (String)



<a id="nestedatt--spec--standby"></a>
### Nested Schema for `spec.standby`

Optional:

- `gs_wal_path` (String)
- `s3_wal_path` (String)
- `standby_host` (String)
- `standby_port` (String)


<a id="nestedatt--spec--streams"></a>
### Nested Schema for `spec.streams`

Required:

- `application_id` (String)
- `database` (String)
- `tables` (Attributes) (see [below for nested schema](#nestedatt--spec--streams--tables))

Optional:

- `batch_size` (Number)
- `filter` (Map of String)

<a id="nestedatt--spec--streams--tables"></a>
### Nested Schema for `spec.streams.tables`

Required:

- `event_type` (String)

Optional:

- `id_column` (String)
- `payload_column` (String)



<a id="nestedatt--spec--tls"></a>
### Nested Schema for `spec.tls`

Required:

- `secret_name` (String)

Optional:

- `ca_file` (String)
- `ca_secret_name` (String)
- `certificate_file` (String)
- `private_key_file` (String)


<a id="nestedatt--spec--tolerations"></a>
### Nested Schema for `spec.tolerations`

Optional:

- `effect` (String)
- `key` (String)
- `operator` (String)
- `toleration_seconds` (Number)
- `value` (String)


