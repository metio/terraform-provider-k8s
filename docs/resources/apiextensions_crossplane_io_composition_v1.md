---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_apiextensions_crossplane_io_composition_v1 Resource - terraform-provider-k8s"
subcategory: "apiextensions.crossplane.io"
description: |-
  A Composition specifies how a composite resource should be composed.
---

# k8s_apiextensions_crossplane_io_composition_v1 (Resource)

A Composition specifies how a composite resource should be composed.

## Example Usage

```terraform
resource "k8s_apiextensions_crossplane_io_composition_v1" "minimal" {
  metadata = {
    name = "test"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) CompositionSpec specifies desired state of a composition. (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `api_version` (String) APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
- `id` (Number) The timestamp of the last change to this resource.
- `kind` (String) Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `composite_type_ref` (Attributes) CompositeTypeRef specifies the type of composite resource that this composition is compatible with. (see [below for nested schema](#nestedatt--spec--composite_type_ref))
- `resources` (Attributes List) Resources is the list of resource templates that will be used when a composite resource referring to this composition is created. (see [below for nested schema](#nestedatt--spec--resources))

Optional:

- `patch_sets` (Attributes List) PatchSets define a named set of patches that may be included by any resource in this Composition. PatchSets cannot themselves refer to other PatchSets. (see [below for nested schema](#nestedatt--spec--patch_sets))
- `publish_connection_details_with_store_config_ref` (Attributes) PublishConnectionDetailsWithStoreConfig specifies the secret store config with which the connection details of composite resources dynamically provisioned using this composition will be published. (see [below for nested schema](#nestedatt--spec--publish_connection_details_with_store_config_ref))
- `write_connection_secrets_to_namespace` (String) WriteConnectionSecretsToNamespace specifies the namespace in which the connection secrets of composite resource dynamically provisioned using this composition will be created. This field is planned to be replaced in a future release in favor of PublishConnectionDetailsWithStoreConfigRef. Currently, both could be set independently and connection details would be published to both without affecting each other as long as related fields at MR level specified.

<a id="nestedatt--spec--composite_type_ref"></a>
### Nested Schema for `spec.composite_type_ref`

Required:

- `api_version` (String) APIVersion of the type.
- `kind` (String) Kind of the type.


<a id="nestedatt--spec--resources"></a>
### Nested Schema for `spec.resources`

Required:

- `base` (Dynamic) Base is the target resource that the patches will be applied on.

Optional:

- `connection_details` (Attributes List) ConnectionDetails lists the propagation secret keys from this target resource to the composition instance connection secret. (see [below for nested schema](#nestedatt--spec--resources--connection_details))
- `name` (String) A Name uniquely identifies this entry within its Composition's resources array. Names are optional but *strongly* recommended. When all entries in the resources array are named entries may added, deleted, and reordered as long as their names do not change. When entries are not named the length and order of the resources array should be treated as immutable. Either all or no entries must be named.
- `patches` (Attributes List) Patches will be applied as overlay to the base resource. (see [below for nested schema](#nestedatt--spec--resources--patches))
- `readiness_checks` (Attributes List) ReadinessChecks allows users to define custom readiness checks. All checks have to return true in order for resource to be considered ready. The default readiness check is to have the 'Ready' condition to be 'True'. (see [below for nested schema](#nestedatt--spec--resources--readiness_checks))

<a id="nestedatt--spec--resources--connection_details"></a>
### Nested Schema for `spec.resources.connection_details`

Optional:

- `from_connection_secret_key` (String) FromConnectionSecretKey is the key that will be used to fetch the value from the given target resource's secret.
- `from_field_path` (String) FromFieldPath is the path of the field on the composed resource whose value to be used as input. Name must be specified if the type is FromFieldPath is specified.
- `name` (String) Name of the connection secret key that will be propagated to the connection secret of the composition instance. Leave empty if you'd like to use the same key name.
- `type` (String) Type sets the connection detail fetching behaviour to be used. Each connection detail type may require its own fields to be set on the ConnectionDetail object. If the type is omitted Crossplane will attempt to infer it based on which other fields were specified.
- `value` (String) Value that will be propagated to the connection secret of the composition instance. Typically you should use FromConnectionSecretKey instead, but an explicit value may be set to inject a fixed, non-sensitive connection secret values, for example a well-known port. Supercedes FromConnectionSecretKey when set.


<a id="nestedatt--spec--resources--patches"></a>
### Nested Schema for `spec.resources.patches`

Optional:

- `combine` (Attributes) Combine is the patch configuration for a CombineFromComposite or CombineToComposite patch. (see [below for nested schema](#nestedatt--spec--resources--patches--combine))
- `from_field_path` (String) FromFieldPath is the path of the field on the resource whose value is to be used as input. Required when type is FromCompositeFieldPath or ToCompositeFieldPath.
- `patch_set_name` (String) PatchSetName to include patches from. Required when type is PatchSet.
- `policy` (Attributes) Policy configures the specifics of patching behaviour. (see [below for nested schema](#nestedatt--spec--resources--patches--policy))
- `to_field_path` (String) ToFieldPath is the path of the field on the resource whose value will be changed with the result of transforms. Leave empty if you'd like to propagate to the same path as fromFieldPath.
- `transforms` (Attributes List) Transforms are the list of functions that are used as a FIFO pipe for the input to be transformed. (see [below for nested schema](#nestedatt--spec--resources--patches--transforms))
- `type` (String) Type sets the patching behaviour to be used. Each patch type may require its' own fields to be set on the Patch object.

<a id="nestedatt--spec--resources--patches--combine"></a>
### Nested Schema for `spec.resources.patches.type`

Required:

- `strategy` (String) Strategy defines the strategy to use to combine the input variable values. Currently only string is supported.
- `variables` (Attributes List) Variables are the list of variables whose values will be retrieved and combined. (see [below for nested schema](#nestedatt--spec--resources--patches--type--variables))

Optional:

- `string` (Attributes) String declares that input variables should be combined into a single string, using the relevant settings for formatting purposes. (see [below for nested schema](#nestedatt--spec--resources--patches--type--string))

<a id="nestedatt--spec--resources--patches--type--variables"></a>
### Nested Schema for `spec.resources.patches.type.variables`

Required:

- `from_field_path` (String) FromFieldPath is the path of the field on the source whose value is to be used as input.


<a id="nestedatt--spec--resources--patches--type--string"></a>
### Nested Schema for `spec.resources.patches.type.string`

Required:

- `fmt` (String) Format the input using a Go format string. See https://golang.org/pkg/fmt/ for details.



<a id="nestedatt--spec--resources--patches--policy"></a>
### Nested Schema for `spec.resources.patches.type`

Optional:

- `from_field_path` (String) FromFieldPath specifies how to patch from a field path. The default is 'Optional', which means the patch will be a no-op if the specified fromFieldPath does not exist. Use 'Required' if the patch should fail if the specified path does not exist.
- `merge_options` (Attributes) MergeOptions Specifies merge options on a field path (see [below for nested schema](#nestedatt--spec--resources--patches--type--merge_options))

<a id="nestedatt--spec--resources--patches--type--merge_options"></a>
### Nested Schema for `spec.resources.patches.type.merge_options`

Optional:

- `append_slice` (Boolean) Specifies that already existing elements in a merged slice should be preserved
- `keep_map_values` (Boolean) Specifies that already existing values in a merged map should be preserved



<a id="nestedatt--spec--resources--patches--transforms"></a>
### Nested Schema for `spec.resources.patches.type`

Required:

- `type` (String) Type of the transform to be run.

Optional:

- `convert` (Attributes) Convert is used to cast the input into the given output type. (see [below for nested schema](#nestedatt--spec--resources--patches--type--convert))
- `map` (Map of String) Map uses the input as a key in the given map and returns the value.
- `math` (Attributes) Math is used to transform the input via mathematical operations such as multiplication. (see [below for nested schema](#nestedatt--spec--resources--patches--type--math))
- `string` (Attributes) String is used to transform the input into a string or a different kind of string. Note that the input does not necessarily need to be a string. (see [below for nested schema](#nestedatt--spec--resources--patches--type--string))

<a id="nestedatt--spec--resources--patches--type--convert"></a>
### Nested Schema for `spec.resources.patches.type.convert`

Required:

- `to_type` (String) ToType is the type of the output of this transform.


<a id="nestedatt--spec--resources--patches--type--math"></a>
### Nested Schema for `spec.resources.patches.type.math`

Optional:

- `multiply` (Number) Multiply the value.


<a id="nestedatt--spec--resources--patches--type--string"></a>
### Nested Schema for `spec.resources.patches.type.string`

Optional:

- `convert` (String) Convert the type of conversion to Upper/Lower case.
- `fmt` (String) Format the input using a Go format string. See https://golang.org/pkg/fmt/ for details.
- `regexp` (Attributes) Extract a match from the input using a regular expression. (see [below for nested schema](#nestedatt--spec--resources--patches--type--string--regexp))
- `trim` (String) Trim the prefix or suffix from the input
- `type` (String) Type of the string transform to be run.

<a id="nestedatt--spec--resources--patches--type--string--regexp"></a>
### Nested Schema for `spec.resources.patches.type.string.type`

Required:

- `match` (String) Match string. May optionally include submatches, aka capture groups. See https://pkg.go.dev/regexp/ for details.

Optional:

- `group` (Number) Group number to match. 0 (the default) matches the entire expression.





<a id="nestedatt--spec--resources--readiness_checks"></a>
### Nested Schema for `spec.resources.readiness_checks`

Required:

- `type` (String) Type indicates the type of probe you'd like to use.

Optional:

- `field_path` (String) FieldPath shows the path of the field whose value will be used.
- `match_integer` (Number) MatchInt is the value you'd like to match if you're using 'MatchInt' type.
- `match_string` (String) MatchString is the value you'd like to match if you're using 'MatchString' type.



<a id="nestedatt--spec--patch_sets"></a>
### Nested Schema for `spec.patch_sets`

Required:

- `name` (String) Name of this PatchSet.
- `patches` (Attributes List) Patches will be applied as an overlay to the base resource. (see [below for nested schema](#nestedatt--spec--patch_sets--patches))

<a id="nestedatt--spec--patch_sets--patches"></a>
### Nested Schema for `spec.patch_sets.patches`

Optional:

- `combine` (Attributes) Combine is the patch configuration for a CombineFromComposite or CombineToComposite patch. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--combine))
- `from_field_path` (String) FromFieldPath is the path of the field on the resource whose value is to be used as input. Required when type is FromCompositeFieldPath or ToCompositeFieldPath.
- `patch_set_name` (String) PatchSetName to include patches from. Required when type is PatchSet.
- `policy` (Attributes) Policy configures the specifics of patching behaviour. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--policy))
- `to_field_path` (String) ToFieldPath is the path of the field on the resource whose value will be changed with the result of transforms. Leave empty if you'd like to propagate to the same path as fromFieldPath.
- `transforms` (Attributes List) Transforms are the list of functions that are used as a FIFO pipe for the input to be transformed. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--transforms))
- `type` (String) Type sets the patching behaviour to be used. Each patch type may require its' own fields to be set on the Patch object.

<a id="nestedatt--spec--patch_sets--patches--combine"></a>
### Nested Schema for `spec.patch_sets.patches.type`

Required:

- `strategy` (String) Strategy defines the strategy to use to combine the input variable values. Currently only string is supported.
- `variables` (Attributes List) Variables are the list of variables whose values will be retrieved and combined. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--variables))

Optional:

- `string` (Attributes) String declares that input variables should be combined into a single string, using the relevant settings for formatting purposes. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--string))

<a id="nestedatt--spec--patch_sets--patches--type--variables"></a>
### Nested Schema for `spec.patch_sets.patches.type.variables`

Required:

- `from_field_path` (String) FromFieldPath is the path of the field on the source whose value is to be used as input.


<a id="nestedatt--spec--patch_sets--patches--type--string"></a>
### Nested Schema for `spec.patch_sets.patches.type.string`

Required:

- `fmt` (String) Format the input using a Go format string. See https://golang.org/pkg/fmt/ for details.



<a id="nestedatt--spec--patch_sets--patches--policy"></a>
### Nested Schema for `spec.patch_sets.patches.type`

Optional:

- `from_field_path` (String) FromFieldPath specifies how to patch from a field path. The default is 'Optional', which means the patch will be a no-op if the specified fromFieldPath does not exist. Use 'Required' if the patch should fail if the specified path does not exist.
- `merge_options` (Attributes) MergeOptions Specifies merge options on a field path (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--merge_options))

<a id="nestedatt--spec--patch_sets--patches--type--merge_options"></a>
### Nested Schema for `spec.patch_sets.patches.type.merge_options`

Optional:

- `append_slice` (Boolean) Specifies that already existing elements in a merged slice should be preserved
- `keep_map_values` (Boolean) Specifies that already existing values in a merged map should be preserved



<a id="nestedatt--spec--patch_sets--patches--transforms"></a>
### Nested Schema for `spec.patch_sets.patches.type`

Required:

- `type` (String) Type of the transform to be run.

Optional:

- `convert` (Attributes) Convert is used to cast the input into the given output type. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--convert))
- `map` (Map of String) Map uses the input as a key in the given map and returns the value.
- `math` (Attributes) Math is used to transform the input via mathematical operations such as multiplication. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--math))
- `string` (Attributes) String is used to transform the input into a string or a different kind of string. Note that the input does not necessarily need to be a string. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--string))

<a id="nestedatt--spec--patch_sets--patches--type--convert"></a>
### Nested Schema for `spec.patch_sets.patches.type.convert`

Required:

- `to_type` (String) ToType is the type of the output of this transform.


<a id="nestedatt--spec--patch_sets--patches--type--math"></a>
### Nested Schema for `spec.patch_sets.patches.type.math`

Optional:

- `multiply` (Number) Multiply the value.


<a id="nestedatt--spec--patch_sets--patches--type--string"></a>
### Nested Schema for `spec.patch_sets.patches.type.string`

Optional:

- `convert` (String) Convert the type of conversion to Upper/Lower case.
- `fmt` (String) Format the input using a Go format string. See https://golang.org/pkg/fmt/ for details.
- `regexp` (Attributes) Extract a match from the input using a regular expression. (see [below for nested schema](#nestedatt--spec--patch_sets--patches--type--string--regexp))
- `trim` (String) Trim the prefix or suffix from the input
- `type` (String) Type of the string transform to be run.

<a id="nestedatt--spec--patch_sets--patches--type--string--regexp"></a>
### Nested Schema for `spec.patch_sets.patches.type.string.type`

Required:

- `match` (String) Match string. May optionally include submatches, aka capture groups. See https://pkg.go.dev/regexp/ for details.

Optional:

- `group` (Number) Group number to match. 0 (the default) matches the entire expression.






<a id="nestedatt--spec--publish_connection_details_with_store_config_ref"></a>
### Nested Schema for `spec.publish_connection_details_with_store_config_ref`

Required:

- `name` (String) Name of the referenced StoreConfig.


