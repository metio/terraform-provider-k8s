---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_leaksignal_com_cluster_leaksignal_istio_v1_manifest Data Source - terraform-provider-k8s"
subcategory: "leaksignal.com"
description: |-
  Deploy LeakSignal Proxy in all istio-enabled namespaces, can be overriden by local LeaksignalIstios.
---

# k8s_leaksignal_com_cluster_leaksignal_istio_v1_manifest (Data Source)

Deploy LeakSignal Proxy in all istio-enabled namespaces, can be overriden by local LeaksignalIstios.

## Example Usage

```terraform
data "k8s_leaksignal_com_cluster_leaksignal_istio_v1_manifest" "example" {
  metadata = {
    name = "some-name"

  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `api_key` (String) API Key from the LeakSignal Command dashboard. Alternatively, the deployment name from LeakAgent.
- `proxy_hash` (String) Hash of the downloaded bundle for LeakSignal Proxy. Will depend on your version and deployment mechanism (nginx, envoy, WASM).
- `proxy_version` (String) Version string for LeakSignal Proxy deployment.

Optional:

- `ca_bundle` (String) Location of CA bundle in istio-proxy. Default is '/etc/ssl/certs/ca-certificates.crt' which is suitable for Istio. OpenShift Service Mesh requires '/etc/ssl/certs/ca-bundle.crt'.
- `enable_client_interception` (Boolean) If true (default), then certificates are installed in pods for outbound TLS interception.
- `enable_streaming` (Boolean) If 'true' (default), then L4 streams are also scanned by LeakSignal Proxy.
- `fail_open` (Boolean) If 'true' (default), if LeakSignal Proxy has a failure, then all traffic is routed around it.
- `grpc_mode` (String) Whether to use Google GRPC or Envoy GRPC for WASM deployments.
- `native` (Boolean) If 'true' (not default), istio-proxy containers are updated to a corresponding image with support for dynamic plugins, and the native LeakSignal Proxy module is installed.
- `native_proxy_memory_limit` (String) Alternative memory limit for Istio sidecars running native modules. Useful to mitigate a surge of memory usage when loading the proxy.
- `native_repo` (String) Default is 'leaksignal/istio-proxy'. If no tag is specified, it is inferred from the existing proxy image on each given pod.
- `proxy_prefix` (String) Prefix of binary to pull. Defaults to 's3/leakproxy'. For LeakAgent deployments, use 'proxy'.
- `proxy_pull_location` (String) Format 'https?://domain(:port)?/'. Defaults to 'https://leakproxy.s3.us-west-2.amazonaws.com/'.
- `refresh_pods_on_stale` (Boolean) Detects pods that should have leaksignal deployed, but dont, and restarts them.
- `refresh_pods_on_update` (Boolean) For WASM mode, redeploys all pods with Istio sidecars affected by a LeakSignal Proxy upgrade. This provides more consistent behavior. Default is 'true'.
- `tls` (Boolean) If 'true' (default), TLS/HTTPS is used for telemetry upload and downloading LeakSignal Proxy. LeakAgent is usually 'false'.
- `upstream_location` (String) Hostname of upstream location to send metrics to. Default is 'ingestion.app.leaksignal.com'.
- `upstream_port` (Number) Port of upstream ingestion. Defaults to 80/443 depending on 'tls'. Recommended 8121 for LeakAgent.
- `workload_selector` (Attributes) Pod selector for workloads. (see [below for nested schema](#nestedatt--spec--workload_selector))

<a id="nestedatt--spec--workload_selector"></a>
### Nested Schema for `spec.workload_selector`

Optional:

- `labels` (Map of String) Labels to match any pod before deploying LeakSignal.
