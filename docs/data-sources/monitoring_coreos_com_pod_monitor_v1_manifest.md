---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_monitoring_coreos_com_pod_monitor_v1_manifest Data Source - terraform-provider-k8s"
subcategory: "monitoring.coreos.com"
description: |-
  PodMonitor defines monitoring for a set of pods.
---

# k8s_monitoring_coreos_com_pod_monitor_v1_manifest (Data Source)

PodMonitor defines monitoring for a set of pods.

## Example Usage

```terraform
data "k8s_monitoring_coreos_com_pod_monitor_v1_manifest" "example" {
  metadata = {
    name      = "some-name"
    namespace = "some-namespace"
  }
  spec = {
    pod_metrics_endpoints = [
      {
        path = "/metrics"
        port = "metrics"
      }
    ]
    selector = {
      match_labels = {
        "key" = "value"
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))
- `spec` (Attributes) Specification of desired Pod selection for target discovery by Prometheus. (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `id` (String) Contains the value `metadata.namespace/metadata.name`.
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `pod_metrics_endpoints` (Attributes List) A list of endpoints allowed as part of this PodMonitor. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints))
- `selector` (Attributes) Selector to select Pod objects. (see [below for nested schema](#nestedatt--spec--selector))

Optional:

- `attach_metadata` (Attributes) Attaches node metadata to discovered targets. Requires Prometheus v2.35.0 and above. (see [below for nested schema](#nestedatt--spec--attach_metadata))
- `job_label` (String) The label to use to retrieve the job name from.
- `label_limit` (Number) Per-scrape limit on number of labels that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
- `label_name_length_limit` (Number) Per-scrape limit on length of labels name that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
- `label_value_length_limit` (Number) Per-scrape limit on length of labels value that will be accepted for a sample. Only valid in Prometheus versions 2.27.0 and newer.
- `namespace_selector` (Attributes) Selector to select which namespaces the Endpoints objects are discovered from. (see [below for nested schema](#nestedatt--spec--namespace_selector))
- `pod_target_labels` (List of String) PodTargetLabels transfers labels on the Kubernetes Pod onto the target.
- `sample_limit` (Number) SampleLimit defines per-scrape limit on number of scraped samples that will be accepted.
- `target_limit` (Number) TargetLimit defines a limit on the number of scraped targets that will be accepted.

<a id="nestedatt--spec--pod_metrics_endpoints"></a>
### Nested Schema for `spec.pod_metrics_endpoints`

Optional:

- `authorization` (Attributes) Authorization section for this endpoint (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--authorization))
- `basic_auth` (Attributes) BasicAuth allow an endpoint to authenticate over basic authentication. More info: https://prometheus.io/docs/operating/configuration/#endpoint (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--basic_auth))
- `bearer_token_secret` (Attributes) Secret to mount to read bearer token for scraping targets. The secret needs to be in the same namespace as the pod monitor and accessible by the Prometheus Operator. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--bearer_token_secret))
- `enable_http2` (Boolean) Whether to enable HTTP2.
- `filter_running` (Boolean) Drop pods that are not running. (Failed, Succeeded). Enabled by default. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase
- `follow_redirects` (Boolean) FollowRedirects configures whether scrape requests follow HTTP 3xx redirects.
- `honor_labels` (Boolean) HonorLabels chooses the metric's labels on collisions with target labels.
- `honor_timestamps` (Boolean) HonorTimestamps controls whether Prometheus respects the timestamps present in scraped data.
- `interval` (String) Interval at which metrics should be scraped If not specified Prometheus' global scrape interval is used.
- `metric_relabelings` (Attributes List) MetricRelabelConfigs to apply to samples before ingestion. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--metric_relabelings))
- `oauth2` (Attributes) OAuth2 for the URL. Only valid in Prometheus versions 2.27.0 and newer. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--oauth2))
- `params` (Map of List of String) Optional HTTP URL parameters
- `path` (String) HTTP path to scrape for metrics. If empty, Prometheus uses the default value (e.g. '/metrics').
- `port` (String) Name of the pod port this endpoint refers to. Mutually exclusive with targetPort.
- `proxy_url` (String) ProxyURL eg http://proxyserver:2195 Directs scrapes to proxy through this endpoint.
- `relabelings` (Attributes List) RelabelConfigs to apply to samples before scraping. Prometheus Operator automatically adds relabelings for a few standard Kubernetes fields. The original scrape job's name is available via the '__tmp_prometheus_job_name' label. More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--relabelings))
- `scheme` (String) HTTP scheme to use for scraping. 'http' and 'https' are the expected values unless you rewrite the '__scheme__' label via relabeling. If empty, Prometheus uses the default value 'http'.
- `scrape_timeout` (String) Timeout after which the scrape is ended If not specified, the Prometheus global scrape interval is used.
- `target_port` (String) Deprecated: Use 'port' instead.
- `tls_config` (Attributes) TLS configuration to use when scraping the endpoint. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config))

<a id="nestedatt--spec--pod_metrics_endpoints--authorization"></a>
### Nested Schema for `spec.pod_metrics_endpoints.authorization`

Optional:

- `credentials` (Attributes) Selects a key of a Secret in the namespace that contains the credentials for authentication. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--authorization--credentials))
- `type` (String) Defines the authentication type. The value is case-insensitive.  'Basic' is not a supported value.  Default: 'Bearer'

<a id="nestedatt--spec--pod_metrics_endpoints--authorization--credentials"></a>
### Nested Schema for `spec.pod_metrics_endpoints.authorization.type`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--basic_auth"></a>
### Nested Schema for `spec.pod_metrics_endpoints.basic_auth`

Optional:

- `password` (Attributes) The secret in the service monitor namespace that contains the password for authentication. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--basic_auth--password))
- `username` (Attributes) The secret in the service monitor namespace that contains the username for authentication. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--basic_auth--username))

<a id="nestedatt--spec--pod_metrics_endpoints--basic_auth--password"></a>
### Nested Schema for `spec.pod_metrics_endpoints.basic_auth.username`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined


<a id="nestedatt--spec--pod_metrics_endpoints--basic_auth--username"></a>
### Nested Schema for `spec.pod_metrics_endpoints.basic_auth.username`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--bearer_token_secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.bearer_token_secret`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined


<a id="nestedatt--spec--pod_metrics_endpoints--metric_relabelings"></a>
### Nested Schema for `spec.pod_metrics_endpoints.metric_relabelings`

Optional:

- `action` (String) Action to perform based on the regex matching.  'Uppercase' and 'Lowercase' actions require Prometheus >= v2.36.0. 'DropEqual' and 'KeepEqual' actions require Prometheus >= v2.41.0.  Default: 'Replace'
- `modulus` (Number) Modulus to take of the hash of the source label values.  Only applicable when the action is 'HashMod'.
- `regex` (String) Regular expression against which the extracted value is matched.
- `replacement` (String) Replacement value against which a Replace action is performed if the regular expression matches.  Regex capture groups are available.
- `separator` (String) Separator is the string between concatenated SourceLabels.
- `source_labels` (List of String) The source labels select values from existing labels. Their content is concatenated using the configured Separator and matched against the configured regular expression.
- `target_label` (String) Label to which the resulting string is written in a replacement.  It is mandatory for 'Replace', 'HashMod', 'Lowercase', 'Uppercase', 'KeepEqual' and 'DropEqual' actions.  Regex capture groups are available.


<a id="nestedatt--spec--pod_metrics_endpoints--oauth2"></a>
### Nested Schema for `spec.pod_metrics_endpoints.oauth2`

Required:

- `client_id` (Attributes) The secret or configmap containing the OAuth2 client id (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--oauth2--client_id))
- `client_secret` (Attributes) The secret containing the OAuth2 client secret (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--oauth2--client_secret))
- `token_url` (String) The URL to fetch the token from

Optional:

- `endpoint_params` (Map of String) Parameters to append to the token URL
- `scopes` (List of String) OAuth2 scopes used for the token request

<a id="nestedatt--spec--pod_metrics_endpoints--oauth2--client_id"></a>
### Nested Schema for `spec.pod_metrics_endpoints.oauth2.scopes`

Optional:

- `config_map` (Attributes) ConfigMap containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--oauth2--scopes--config_map))
- `secret` (Attributes) Secret containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--oauth2--scopes--secret))

<a id="nestedatt--spec--pod_metrics_endpoints--oauth2--scopes--config_map"></a>
### Nested Schema for `spec.pod_metrics_endpoints.oauth2.scopes.config_map`

Required:

- `key` (String) The key to select.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the ConfigMap or its key must be defined


<a id="nestedatt--spec--pod_metrics_endpoints--oauth2--scopes--secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.oauth2.scopes.secret`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--oauth2--client_secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.oauth2.scopes`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--relabelings"></a>
### Nested Schema for `spec.pod_metrics_endpoints.relabelings`

Optional:

- `action` (String) Action to perform based on the regex matching.  'Uppercase' and 'Lowercase' actions require Prometheus >= v2.36.0. 'DropEqual' and 'KeepEqual' actions require Prometheus >= v2.41.0.  Default: 'Replace'
- `modulus` (Number) Modulus to take of the hash of the source label values.  Only applicable when the action is 'HashMod'.
- `regex` (String) Regular expression against which the extracted value is matched.
- `replacement` (String) Replacement value against which a Replace action is performed if the regular expression matches.  Regex capture groups are available.
- `separator` (String) Separator is the string between concatenated SourceLabels.
- `source_labels` (List of String) The source labels select values from existing labels. Their content is concatenated using the configured Separator and matched against the configured regular expression.
- `target_label` (String) Label to which the resulting string is written in a replacement.  It is mandatory for 'Replace', 'HashMod', 'Lowercase', 'Uppercase', 'KeepEqual' and 'DropEqual' actions.  Regex capture groups are available.


<a id="nestedatt--spec--pod_metrics_endpoints--tls_config"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config`

Optional:

- `ca` (Attributes) Certificate authority used when verifying server certificates. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--ca))
- `cert` (Attributes) Client certificate to present when doing client-authentication. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--cert))
- `insecure_skip_verify` (Boolean) Disable target certificate validation.
- `key_secret` (Attributes) Secret containing the client key file for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--key_secret))
- `server_name` (String) Used to verify the hostname for the targets.

<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--ca"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name`

Optional:

- `config_map` (Attributes) ConfigMap containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--config_map))
- `secret` (Attributes) Secret containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--secret))

<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--config_map"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name.config_map`

Required:

- `key` (String) The key to select.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the ConfigMap or its key must be defined


<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name.secret`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--cert"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name`

Optional:

- `config_map` (Attributes) ConfigMap containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--config_map))
- `secret` (Attributes) Secret containing data to use for the targets. (see [below for nested schema](#nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--secret))

<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--config_map"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name.config_map`

Required:

- `key` (String) The key to select.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the ConfigMap or its key must be defined


<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--server_name--secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name.secret`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined



<a id="nestedatt--spec--pod_metrics_endpoints--tls_config--key_secret"></a>
### Nested Schema for `spec.pod_metrics_endpoints.tls_config.server_name`

Required:

- `key` (String) The key of the secret to select from.  Must be a valid secret key.

Optional:

- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) Specify whether the Secret or its key must be defined




<a id="nestedatt--spec--selector"></a>
### Nested Schema for `spec.selector`

Optional:

- `match_expressions` (Attributes List) matchExpressions is a list of label selector requirements. The requirements are ANDed. (see [below for nested schema](#nestedatt--spec--selector--match_expressions))
- `match_labels` (Map of String) matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is 'key', the operator is 'In', and the values array contains only 'value'. The requirements are ANDed.

<a id="nestedatt--spec--selector--match_expressions"></a>
### Nested Schema for `spec.selector.match_expressions`

Required:

- `key` (String) key is the label key that the selector applies to.
- `operator` (String) operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.

Optional:

- `values` (List of String) values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.



<a id="nestedatt--spec--attach_metadata"></a>
### Nested Schema for `spec.attach_metadata`

Optional:

- `node` (Boolean) When set to true, Prometheus must have permissions to get Nodes.


<a id="nestedatt--spec--namespace_selector"></a>
### Nested Schema for `spec.namespace_selector`

Optional:

- `any` (Boolean) Boolean describing whether all namespaces are selected in contrast to a list restricting them.
- `match_names` (List of String) List of namespace names to select from.
