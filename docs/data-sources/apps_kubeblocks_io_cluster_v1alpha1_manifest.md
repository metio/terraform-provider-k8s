---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_apps_kubeblocks_io_cluster_v1alpha1_manifest Data Source - terraform-provider-k8s"
subcategory: "apps.kubeblocks.io"
description: |-
  Cluster is the Schema for the clusters API.
---

# k8s_apps_kubeblocks_io_cluster_v1alpha1_manifest (Data Source)

Cluster is the Schema for the clusters API.

## Example Usage

```terraform
data "k8s_apps_kubeblocks_io_cluster_v1alpha1_manifest" "example" {
  metadata = {
    name      = "some-name"
    namespace = "some-namespace"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) ClusterSpec defines the desired state of Cluster. (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `termination_policy` (String) Specifies the cluster termination policy.  - DoNotTerminate will block delete operation. - Halt will delete workload resources such as statefulset, deployment workloads but keep PVCs. - Delete is based on Halt and deletes PVCs. - WipeOut is based on Delete and wipe out all volume snapshots and snapshot data from backup storage location.

Optional:

- `affinity` (Attributes) A group of affinity scheduling rules. (see [below for nested schema](#nestedatt--spec--affinity))
- `availability_policy` (String) Describes the availability policy, including zone, node, and none.
- `backup` (Attributes) Cluster backup configuration. (see [below for nested schema](#nestedatt--spec--backup))
- `cluster_definition_ref` (String) Refers to the ClusterDefinition name. If not specified, ComponentDef must be specified for each Component in ComponentSpecs.
- `cluster_version_ref` (String) Refers to the ClusterVersion name.
- `component_specs` (Attributes List) List of componentSpec used to define the components that make up a cluster. ComponentSpecs and ShardingSpecs cannot both be empty at the same time. (see [below for nested schema](#nestedatt--spec--component_specs))
- `monitor` (Attributes) The configuration of monitor. (see [below for nested schema](#nestedatt--spec--monitor))
- `network` (Attributes) The configuration of network. (see [below for nested schema](#nestedatt--spec--network))
- `replicas` (Number) Specifies the replicas of the first componentSpec, if the replicas of the first componentSpec is specified, this value will be ignored.
- `resources` (Attributes) Specifies the resources of the first componentSpec, if the resources of the first componentSpec is specified, this value will be ignored. (see [below for nested schema](#nestedatt--spec--resources))
- `services` (Map of String) Defines the services to access a cluster.
- `sharding_specs` (Attributes List) List of ShardingSpec used to define components with a sharding topology structure that make up a cluster. ShardingSpecs and ComponentSpecs cannot both be empty at the same time. (see [below for nested schema](#nestedatt--spec--sharding_specs))
- `storage` (Attributes) Specifies the storage of the first componentSpec, if the storage of the first componentSpec is specified, this value will be ignored. (see [below for nested schema](#nestedatt--spec--storage))
- `tenancy` (String) Describes how pods are distributed across node.
- `tolerations` (Map of String) Attached to tolerate any taint that matches the triple 'key,value,effect' using the matching operator 'operator'.

<a id="nestedatt--spec--affinity"></a>
### Nested Schema for `spec.affinity`

Optional:

- `node_labels` (Map of String) Indicates that pods must be scheduled to the nodes with the specified node labels.
- `pod_anti_affinity` (String) Specifies the anti-affinity level of pods within a component.
- `tenancy` (String) Defines how pods are distributed across nodes.
- `topology_keys` (List of String) Represents the key of node labels.  Nodes with a label containing this key and identical values are considered to be in the same topology. This is used as the topology domain for pod anti-affinity and pod spread constraint. Some well-known label keys, such as 'kubernetes.io/hostname' and 'topology.kubernetes.io/zone', are often used as TopologyKey, along with any other custom label key.


<a id="nestedatt--spec--backup"></a>
### Nested Schema for `spec.backup`

Required:

- `method` (String) Specifies the backup method to use, as defined in backupPolicy.

Optional:

- `cron_expression` (String) The cron expression for the schedule. The timezone is in UTC. See https://en.wikipedia.org/wiki/Cron.
- `enabled` (Boolean) Specifies whether automated backup is enabled.
- `pitr_enabled` (Boolean) Specifies whether to enable point-in-time recovery.
- `repo_name` (String) Specifies the name of the backupRepo. If not set, the default backupRepo will be used.
- `retention_period` (String) Determines the duration for which the backup should be retained. All backups older than this period will be removed by the controller.  For example, RetentionPeriod of '30d' will keep only the backups of last 30 days. Sample duration format:  - years: 	2y - months: 	6mo - days: 		30d - hours: 	12h - minutes: 	30m  You can also combine the above durations. For example: 30d12h30m
- `starting_deadline_minutes` (Number) Defines the deadline in minutes for starting the backup job if it misses its scheduled time for any reason.


<a id="nestedatt--spec--component_specs"></a>
### Nested Schema for `spec.component_specs`

Required:

- `replicas` (Number) Specifies the number of component replicas.

Optional:

- `affinity` (Attributes) A group of affinity scheduling rules. (see [below for nested schema](#nestedatt--spec--component_specs--affinity))
- `class_def_ref` (Attributes) References the class defined in ComponentClassDefinition. (see [below for nested schema](#nestedatt--spec--component_specs--class_def_ref))
- `component_def` (String) References the name of the ComponentDefinition. If both componentDefRef and componentDef are provided, the componentDef will take precedence over componentDefRef.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='componentDef is immutable'
- `component_def_ref` (String) References the componentDef defined in the ClusterDefinition spec. Must comply with the IANA Service Naming rule.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='componentDefRef is immutable'
- `enabled_logs` (List of String) Indicates which log file takes effect in the database cluster.
- `instances` (List of String) Defines the list of instances to be deleted priorly. If the RsmTransformPolicy is specified as ToPod, the list of instances will be used.
- `issuer` (Attributes) Defines provider context for TLS certs. Required when TLS is enabled. (see [below for nested schema](#nestedatt--spec--component_specs--issuer))
- `monitor` (Boolean) To enable monitoring.
- `name` (String) Specifies the name of the cluster's component. This name is also part of the Service DNS name and must comply with the IANA Service Naming rule. When ClusterComponentSpec is referenced as a template, the name is optional. Otherwise, it is required.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='name is immutable'
- `nodes` (List of String) Defines the list of nodes that pods can schedule. If the RsmTransformPolicy is specified as ToPod, the list of nodes will be used. If the list of nodes is empty, no specific node will be assigned. However, if the list of nodes is filled, all pods will be evenly scheduled across the nodes in the list.
- `resources` (Attributes) Specifies the resources requests and limits of the workload. (see [below for nested schema](#nestedatt--spec--component_specs--resources))
- `rsm_transform_policy` (String) Defines the policy to generate sts using rsm.
- `service_account_name` (String) Specifies the name of the ServiceAccount that the running component depends on.
- `service_refs` (Attributes List) Defines service references for the current component.  Based on the referenced services, they can be categorized into two types:  - Service provided by external sources: These services are provided by external sources and are not managed by KubeBlocks. They can be Kubernetes-based or non-Kubernetes services. For external services, an additional ServiceDescriptor object is needed to establish the service binding. - Service provided by other KubeBlocks clusters: These services are provided by other KubeBlocks clusters. Binding to these services is done by specifying the name of the hosting cluster.  Each type of service reference requires specific configurations and bindings to establish the connection and interaction with the respective services. Note that the ServiceRef has cluster-level semantic consistency, meaning that within the same Cluster, service references with the same ServiceRef.Name are considered to be the same service. It is only allowed to bind to the same Cluster or ServiceDescriptor. (see [below for nested schema](#nestedatt--spec--component_specs--service_refs))
- `services` (Attributes List) Services expose endpoints that can be accessed by clients. (see [below for nested schema](#nestedatt--spec--component_specs--services))
- `switch_policy` (Attributes) Defines the strategy for switchover and failover when workloadType is Replication. (see [below for nested schema](#nestedatt--spec--component_specs--switch_policy))
- `tls` (Boolean) Enables or disables TLS certs.
- `tolerations` (Map of String) Attached to tolerate any taint that matches the triple 'key,value,effect' using the matching operator 'operator'.
- `update_strategy` (String) Defines the update strategy for the component. Not supported.
- `user_resource_refs` (Attributes) Defines the user-defined volumes. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs))
- `volume_claim_templates` (Attributes List) Provides information for statefulset.spec.volumeClaimTemplates. (see [below for nested schema](#nestedatt--spec--component_specs--volume_claim_templates))

<a id="nestedatt--spec--component_specs--affinity"></a>
### Nested Schema for `spec.component_specs.affinity`

Optional:

- `node_labels` (Map of String) Indicates that pods must be scheduled to the nodes with the specified node labels.
- `pod_anti_affinity` (String) Specifies the anti-affinity level of pods within a component.
- `tenancy` (String) Defines how pods are distributed across nodes.
- `topology_keys` (List of String) Represents the key of node labels.  Nodes with a label containing this key and identical values are considered to be in the same topology. This is used as the topology domain for pod anti-affinity and pod spread constraint. Some well-known label keys, such as 'kubernetes.io/hostname' and 'topology.kubernetes.io/zone', are often used as TopologyKey, along with any other custom label key.


<a id="nestedatt--spec--component_specs--class_def_ref"></a>
### Nested Schema for `spec.component_specs.class_def_ref`

Required:

- `class` (String) Defines the name of the class that is defined in the ComponentClassDefinition.

Optional:

- `name` (String) Specifies the name of the ComponentClassDefinition.


<a id="nestedatt--spec--component_specs--issuer"></a>
### Nested Schema for `spec.component_specs.issuer`

Required:

- `name` (String) The issuer for TLS certificates.

Optional:

- `secret_ref` (Attributes) SecretRef is the reference to the TLS certificates secret. It is required when the issuer is set to UserProvided. (see [below for nested schema](#nestedatt--spec--component_specs--issuer--secret_ref))

<a id="nestedatt--spec--component_specs--issuer--secret_ref"></a>
### Nested Schema for `spec.component_specs.issuer.secret_ref`

Required:

- `ca` (String) CA cert key in Secret
- `cert` (String) Cert key in Secret
- `key` (String) Key of TLS private key in Secret
- `name` (String) Name of the Secret



<a id="nestedatt--spec--component_specs--resources"></a>
### Nested Schema for `spec.component_specs.resources`

Optional:

- `claims` (Attributes List) Claims lists the names of resources, defined in spec.resourceClaims, that are used by this container.  This is an alpha field and requires enabling the DynamicResourceAllocation feature gate.  This field is immutable. It can only be set for containers. (see [below for nested schema](#nestedatt--spec--component_specs--resources--claims))
- `limits` (Map of String) Limits describes the maximum amount of compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
- `requests` (Map of String) Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

<a id="nestedatt--spec--component_specs--resources--claims"></a>
### Nested Schema for `spec.component_specs.resources.requests`

Required:

- `name` (String) Name must match the name of one entry in pod.spec.resourceClaims of the Pod where this field is used. It makes that resource available inside a container.



<a id="nestedatt--spec--component_specs--service_refs"></a>
### Nested Schema for `spec.component_specs.service_refs`

Required:

- `name` (String) Specifies the identifier of the service reference declaration. It corresponds to the serviceRefDeclaration name defined in the clusterDefinition.componentDefs[*].serviceRefDeclarations[*].name.

Optional:

- `cluster` (String) The name of the KubeBlocks cluster being referenced when a service provided by another KubeBlocks cluster is being referenced.  By default, the clusterDefinition.spec.connectionCredential secret corresponding to the referenced Cluster will be used to bind to the current component. The connection credential secret should include and correspond to the following fields: endpoint, port, username, and password when a KubeBlocks cluster is being referenced.  Under this referencing approach, the ServiceKind and ServiceVersion of service reference declaration defined in the ClusterDefinition will not be validated. If both Cluster and ServiceDescriptor are specified, the Cluster takes precedence.
- `namespace` (String) Specifies the namespace of the referenced Cluster or the namespace of the referenced ServiceDescriptor object. If not provided, the referenced Cluster and ServiceDescriptor will be searched in the namespace of the current cluster by default.
- `service_descriptor` (String) The service descriptor of the service provided by external sources.  When referencing a service provided by external sources, the ServiceDescriptor object name is required to establish the service binding. The 'serviceDescriptor.spec.serviceKind' and 'serviceDescriptor.spec.serviceVersion' should match the serviceKind and serviceVersion defined in the service reference declaration in the ClusterDefinition.  If both Cluster and ServiceDescriptor are specified, the Cluster takes precedence.


<a id="nestedatt--spec--component_specs--services"></a>
### Nested Schema for `spec.component_specs.services`

Required:

- `name` (String) The name of the service.

Optional:

- `annotations` (Map of String) If ServiceType is LoadBalancer, cloud provider related parameters can be put here. More info: https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer.
- `service_type` (String) Determines how the Service is exposed. Valid options are ClusterIP, NodePort, and LoadBalancer.  - 'ClusterIP' allocates a cluster-internal IP address for load-balancing to endpoints. Endpoints are determined by the selector or if that is not specified, they are determined by manual construction of an Endpoints object or EndpointSlice objects. If clusterIP is 'None', no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP. - 'NodePort' builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP. - 'LoadBalancer' builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP.  More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types.


<a id="nestedatt--spec--component_specs--switch_policy"></a>
### Nested Schema for `spec.component_specs.switch_policy`

Optional:

- `type` (String) Type specifies the type of switch policy to be applied.


<a id="nestedatt--spec--component_specs--user_resource_refs"></a>
### Nested Schema for `spec.component_specs.user_resource_refs`

Optional:

- `config_map_refs` (Attributes List) ConfigMapRefs defines the user-defined config maps. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--config_map_refs))
- `secret_refs` (Attributes List) SecretRefs defines the user-defined secrets. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--secret_refs))

<a id="nestedatt--spec--component_specs--user_resource_refs--config_map_refs"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs`

Required:

- `config_map` (Attributes) ConfigMap specifies the ConfigMap to be mounted as a volume. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--secret_refs--config_map))
- `mount_point` (String) MountPoint is the filesystem path where the volume will be mounted.
- `name` (String) Name is the name of the referenced ConfigMap or Secret object. It must conform to DNS label standards.

Optional:

- `as_volume_from` (List of String) AsVolumeFrom lists the names of containers in which the volume should be mounted.
- `sub_path` (String) SubPath specifies a path within the volume from which to mount.

<a id="nestedatt--spec--component_specs--user_resource_refs--secret_refs--config_map"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs.config_map`

Optional:

- `default_mode` (Number) defaultMode is optional: mode bits used to set permissions on created files by default. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. Defaults to 0644. Directories within the path are not affected by this setting. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.
- `items` (Attributes List) items if unspecified, each key-value pair in the Data field of the referenced ConfigMap will be projected into the volume as a file whose name is the key and content is the value. If specified, the listed keys will be projected into the specified paths, and unlisted keys will not be present. If a key is specified which is not present in the ConfigMap, the volume setup will error unless it is marked optional. Paths must be relative and may not contain the '..' path or start with '..'. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--secret_refs--config_map--items))
- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) optional specify whether the ConfigMap or its keys must be defined

<a id="nestedatt--spec--component_specs--user_resource_refs--secret_refs--config_map--items"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs.config_map.optional`

Required:

- `key` (String) key is the key to project.
- `path` (String) path is the relative path of the file to map the key to. May not be an absolute path. May not contain the path element '..'. May not start with the string '..'.

Optional:

- `mode` (Number) mode is Optional: mode bits used to set permissions on this file. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. If not specified, the volume defaultMode will be used. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.




<a id="nestedatt--spec--component_specs--user_resource_refs--secret_refs"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs`

Required:

- `mount_point` (String) MountPoint is the filesystem path where the volume will be mounted.
- `name` (String) Name is the name of the referenced ConfigMap or Secret object. It must conform to DNS label standards.
- `secret` (Attributes) Secret specifies the secret to be mounted as a volume. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--secret_refs--secret))

Optional:

- `as_volume_from` (List of String) AsVolumeFrom lists the names of containers in which the volume should be mounted.
- `sub_path` (String) SubPath specifies a path within the volume from which to mount.

<a id="nestedatt--spec--component_specs--user_resource_refs--secret_refs--secret"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs.secret`

Optional:

- `default_mode` (Number) defaultMode is Optional: mode bits used to set permissions on created files by default. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. Defaults to 0644. Directories within the path are not affected by this setting. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.
- `items` (Attributes List) items If unspecified, each key-value pair in the Data field of the referenced Secret will be projected into the volume as a file whose name is the key and content is the value. If specified, the listed keys will be projected into the specified paths, and unlisted keys will not be present. If a key is specified which is not present in the Secret, the volume setup will error unless it is marked optional. Paths must be relative and may not contain the '..' path or start with '..'. (see [below for nested schema](#nestedatt--spec--component_specs--user_resource_refs--secret_refs--secret--items))
- `optional` (Boolean) optional field specify whether the Secret or its keys must be defined
- `secret_name` (String) secretName is the name of the secret in the pod's namespace to use. More info: https://kubernetes.io/docs/concepts/storage/volumes#secret

<a id="nestedatt--spec--component_specs--user_resource_refs--secret_refs--secret--items"></a>
### Nested Schema for `spec.component_specs.user_resource_refs.secret_refs.secret.secret_name`

Required:

- `key` (String) key is the key to project.
- `path` (String) path is the relative path of the file to map the key to. May not be an absolute path. May not contain the path element '..'. May not start with the string '..'.

Optional:

- `mode` (Number) mode is Optional: mode bits used to set permissions on this file. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. If not specified, the volume defaultMode will be used. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.





<a id="nestedatt--spec--component_specs--volume_claim_templates"></a>
### Nested Schema for `spec.component_specs.volume_claim_templates`

Required:

- `name` (String) Refers to 'clusterDefinition.spec.componentDefs.containers.volumeMounts.name'.

Optional:

- `spec` (Attributes) Defines the desired characteristics of a volume requested by a pod author. (see [below for nested schema](#nestedatt--spec--component_specs--volume_claim_templates--spec))

<a id="nestedatt--spec--component_specs--volume_claim_templates--spec"></a>
### Nested Schema for `spec.component_specs.volume_claim_templates.spec`

Optional:

- `access_modes` (Map of String) Contains the desired access modes the volume should have. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#access-modes-1.
- `resources` (Attributes) Represents the minimum resources the volume should have. If the RecoverVolumeExpansionFailure feature is enabled, users are allowed to specify resource requirements that are lower than the previous value but must still be higher than the capacity recorded in the status field of the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#resources. (see [below for nested schema](#nestedatt--spec--component_specs--volume_claim_templates--spec--resources))
- `storage_class_name` (String) The name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1.
- `volume_mode` (String) Defines what type of volume is required by the claim.

<a id="nestedatt--spec--component_specs--volume_claim_templates--spec--resources"></a>
### Nested Schema for `spec.component_specs.volume_claim_templates.spec.resources`

Optional:

- `claims` (Attributes List) Claims lists the names of resources, defined in spec.resourceClaims, that are used by this container.  This is an alpha field and requires enabling the DynamicResourceAllocation feature gate.  This field is immutable. It can only be set for containers. (see [below for nested schema](#nestedatt--spec--component_specs--volume_claim_templates--spec--resources--claims))
- `limits` (Map of String) Limits describes the maximum amount of compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
- `requests` (Map of String) Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

<a id="nestedatt--spec--component_specs--volume_claim_templates--spec--resources--claims"></a>
### Nested Schema for `spec.component_specs.volume_claim_templates.spec.resources.requests`

Required:

- `name` (String) Name must match the name of one entry in pod.spec.resourceClaims of the Pod where this field is used. It makes that resource available inside a container.






<a id="nestedatt--spec--monitor"></a>
### Nested Schema for `spec.monitor`

Optional:

- `monitoring_interval` (String) Defines the frequency at which monitoring occurs. If set to 0, monitoring is disabled.


<a id="nestedatt--spec--network"></a>
### Nested Schema for `spec.network`

Optional:

- `host_network_accessible` (Boolean) Indicates whether the host network can be accessed. By default, this is set to false.
- `publicly_accessible` (Boolean) Indicates whether the network is accessible to the public. By default, this is set to false.


<a id="nestedatt--spec--resources"></a>
### Nested Schema for `spec.resources`

Optional:

- `cpu` (String) Specifies the amount of processing power the cluster needs. For more information, refer to: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
- `memory` (String) Specifies the amount of memory the cluster needs. For more information, refer to: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/


<a id="nestedatt--spec--sharding_specs"></a>
### Nested Schema for `spec.sharding_specs`

Required:

- `name` (String) Specifies the identifier for the sharding configuration. This identifier is included as part of the Service DNS name and must comply with IANA Service Naming rules. It is used to generate the names of underlying components following the pattern '$(ShardingSpec.Name)-$(ShardID)'. Note that the name of the component template defined in ShardingSpec.Template.Name will be disregarded.
- `template` (Attributes) The blueprint for the components. Generates a set of components (also referred to as shards) based on this template. All components or shards generated will have identical specifications and definitions. (see [below for nested schema](#nestedatt--spec--sharding_specs--template))

Optional:

- `shards` (Number) Specifies the number of components, all of which will have identical specifications and definitions.  The number of replicas for each component should be defined by template.replicas. The logical relationship between these components should be maintained by the components themselves. KubeBlocks only provides lifecycle management for sharding, including:  1. Executing the postProvision Action defined in the ComponentDefinition when the number of shards increases, provided the conditions are met. 2. Executing the preTerminate Action defined in the ComponentDefinition when the number of shards decreases, provided the conditions are met. Resources and data associated with the corresponding Component will also be deleted.

<a id="nestedatt--spec--sharding_specs--template"></a>
### Nested Schema for `spec.sharding_specs.template`

Required:

- `replicas` (Number) Specifies the number of component replicas.

Optional:

- `affinity` (Attributes) A group of affinity scheduling rules. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--affinity))
- `class_def_ref` (Attributes) References the class defined in ComponentClassDefinition. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--class_def_ref))
- `component_def` (String) References the name of the ComponentDefinition. If both componentDefRef and componentDef are provided, the componentDef will take precedence over componentDefRef.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='componentDef is immutable'
- `component_def_ref` (String) References the componentDef defined in the ClusterDefinition spec. Must comply with the IANA Service Naming rule.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='componentDefRef is immutable'
- `enabled_logs` (List of String) Indicates which log file takes effect in the database cluster.
- `instances` (List of String) Defines the list of instances to be deleted priorly. If the RsmTransformPolicy is specified as ToPod, the list of instances will be used.
- `issuer` (Attributes) Defines provider context for TLS certs. Required when TLS is enabled. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--issuer))
- `monitor` (Boolean) To enable monitoring.
- `name` (String) Specifies the name of the cluster's component. This name is also part of the Service DNS name and must comply with the IANA Service Naming rule. When ClusterComponentSpec is referenced as a template, the name is optional. Otherwise, it is required.  TODO +kubebuilder:validation:XValidation:rule='self == oldSelf',message='name is immutable'
- `nodes` (List of String) Defines the list of nodes that pods can schedule. If the RsmTransformPolicy is specified as ToPod, the list of nodes will be used. If the list of nodes is empty, no specific node will be assigned. However, if the list of nodes is filled, all pods will be evenly scheduled across the nodes in the list.
- `resources` (Attributes) Specifies the resources requests and limits of the workload. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--resources))
- `rsm_transform_policy` (String) Defines the policy to generate sts using rsm.
- `service_account_name` (String) Specifies the name of the ServiceAccount that the running component depends on.
- `service_refs` (Attributes List) Defines service references for the current component.  Based on the referenced services, they can be categorized into two types:  - Service provided by external sources: These services are provided by external sources and are not managed by KubeBlocks. They can be Kubernetes-based or non-Kubernetes services. For external services, an additional ServiceDescriptor object is needed to establish the service binding. - Service provided by other KubeBlocks clusters: These services are provided by other KubeBlocks clusters. Binding to these services is done by specifying the name of the hosting cluster.  Each type of service reference requires specific configurations and bindings to establish the connection and interaction with the respective services. Note that the ServiceRef has cluster-level semantic consistency, meaning that within the same Cluster, service references with the same ServiceRef.Name are considered to be the same service. It is only allowed to bind to the same Cluster or ServiceDescriptor. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--service_refs))
- `services` (Attributes List) Services expose endpoints that can be accessed by clients. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--services))
- `switch_policy` (Attributes) Defines the strategy for switchover and failover when workloadType is Replication. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--switch_policy))
- `tls` (Boolean) Enables or disables TLS certs.
- `tolerations` (Map of String) Attached to tolerate any taint that matches the triple 'key,value,effect' using the matching operator 'operator'.
- `update_strategy` (String) Defines the update strategy for the component. Not supported.
- `user_resource_refs` (Attributes) Defines the user-defined volumes. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--user_resource_refs))
- `volume_claim_templates` (Attributes List) Provides information for statefulset.spec.volumeClaimTemplates. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates))

<a id="nestedatt--spec--sharding_specs--template--affinity"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Optional:

- `node_labels` (Map of String) Indicates that pods must be scheduled to the nodes with the specified node labels.
- `pod_anti_affinity` (String) Specifies the anti-affinity level of pods within a component.
- `tenancy` (String) Defines how pods are distributed across nodes.
- `topology_keys` (List of String) Represents the key of node labels.  Nodes with a label containing this key and identical values are considered to be in the same topology. This is used as the topology domain for pod anti-affinity and pod spread constraint. Some well-known label keys, such as 'kubernetes.io/hostname' and 'topology.kubernetes.io/zone', are often used as TopologyKey, along with any other custom label key.


<a id="nestedatt--spec--sharding_specs--template--class_def_ref"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Required:

- `class` (String) Defines the name of the class that is defined in the ComponentClassDefinition.

Optional:

- `name` (String) Specifies the name of the ComponentClassDefinition.


<a id="nestedatt--spec--sharding_specs--template--issuer"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Required:

- `name` (String) The issuer for TLS certificates.

Optional:

- `secret_ref` (Attributes) SecretRef is the reference to the TLS certificates secret. It is required when the issuer is set to UserProvided. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_ref))

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_ref"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.secret_ref`

Required:

- `ca` (String) CA cert key in Secret
- `cert` (String) Cert key in Secret
- `key` (String) Key of TLS private key in Secret
- `name` (String) Name of the Secret



<a id="nestedatt--spec--sharding_specs--template--resources"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Optional:

- `claims` (Attributes List) Claims lists the names of resources, defined in spec.resourceClaims, that are used by this container.  This is an alpha field and requires enabling the DynamicResourceAllocation feature gate.  This field is immutable. It can only be set for containers. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--claims))
- `limits` (Map of String) Limits describes the maximum amount of compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
- `requests` (Map of String) Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--claims"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.claims`

Required:

- `name` (String) Name must match the name of one entry in pod.spec.resourceClaims of the Pod where this field is used. It makes that resource available inside a container.



<a id="nestedatt--spec--sharding_specs--template--service_refs"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Required:

- `name` (String) Specifies the identifier of the service reference declaration. It corresponds to the serviceRefDeclaration name defined in the clusterDefinition.componentDefs[*].serviceRefDeclarations[*].name.

Optional:

- `cluster` (String) The name of the KubeBlocks cluster being referenced when a service provided by another KubeBlocks cluster is being referenced.  By default, the clusterDefinition.spec.connectionCredential secret corresponding to the referenced Cluster will be used to bind to the current component. The connection credential secret should include and correspond to the following fields: endpoint, port, username, and password when a KubeBlocks cluster is being referenced.  Under this referencing approach, the ServiceKind and ServiceVersion of service reference declaration defined in the ClusterDefinition will not be validated. If both Cluster and ServiceDescriptor are specified, the Cluster takes precedence.
- `namespace` (String) Specifies the namespace of the referenced Cluster or the namespace of the referenced ServiceDescriptor object. If not provided, the referenced Cluster and ServiceDescriptor will be searched in the namespace of the current cluster by default.
- `service_descriptor` (String) The service descriptor of the service provided by external sources.  When referencing a service provided by external sources, the ServiceDescriptor object name is required to establish the service binding. The 'serviceDescriptor.spec.serviceKind' and 'serviceDescriptor.spec.serviceVersion' should match the serviceKind and serviceVersion defined in the service reference declaration in the ClusterDefinition.  If both Cluster and ServiceDescriptor are specified, the Cluster takes precedence.


<a id="nestedatt--spec--sharding_specs--template--services"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Required:

- `name` (String) The name of the service.

Optional:

- `annotations` (Map of String) If ServiceType is LoadBalancer, cloud provider related parameters can be put here. More info: https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer.
- `service_type` (String) Determines how the Service is exposed. Valid options are ClusterIP, NodePort, and LoadBalancer.  - 'ClusterIP' allocates a cluster-internal IP address for load-balancing to endpoints. Endpoints are determined by the selector or if that is not specified, they are determined by manual construction of an Endpoints object or EndpointSlice objects. If clusterIP is 'None', no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP. - 'NodePort' builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP. - 'LoadBalancer' builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP.  More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types.


<a id="nestedatt--spec--sharding_specs--template--switch_policy"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Optional:

- `type` (String) Type specifies the type of switch policy to be applied.


<a id="nestedatt--spec--sharding_specs--template--user_resource_refs"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Optional:

- `config_map_refs` (Attributes List) ConfigMapRefs defines the user-defined config maps. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs))
- `secret_refs` (Attributes List) SecretRefs defines the user-defined secrets. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs))

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.config_map_refs`

Required:

- `config_map` (Attributes) ConfigMap specifies the ConfigMap to be mounted as a volume. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs--config_map))
- `mount_point` (String) MountPoint is the filesystem path where the volume will be mounted.
- `name` (String) Name is the name of the referenced ConfigMap or Secret object. It must conform to DNS label standards.

Optional:

- `as_volume_from` (List of String) AsVolumeFrom lists the names of containers in which the volume should be mounted.
- `sub_path` (String) SubPath specifies a path within the volume from which to mount.

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs--config_map"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.config_map_refs.sub_path`

Optional:

- `default_mode` (Number) defaultMode is optional: mode bits used to set permissions on created files by default. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. Defaults to 0644. Directories within the path are not affected by this setting. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.
- `items` (Attributes List) items if unspecified, each key-value pair in the Data field of the referenced ConfigMap will be projected into the volume as a file whose name is the key and content is the value. If specified, the listed keys will be projected into the specified paths, and unlisted keys will not be present. If a key is specified which is not present in the ConfigMap, the volume setup will error unless it is marked optional. Paths must be relative and may not contain the '..' path or start with '..'. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs--sub_path--items))
- `name` (String) Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?
- `optional` (Boolean) optional specify whether the ConfigMap or its keys must be defined

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--config_map_refs--sub_path--items"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.config_map_refs.sub_path.optional`

Required:

- `key` (String) key is the key to project.
- `path` (String) path is the relative path of the file to map the key to. May not be an absolute path. May not contain the path element '..'. May not start with the string '..'.

Optional:

- `mode` (Number) mode is Optional: mode bits used to set permissions on this file. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. If not specified, the volume defaultMode will be used. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.




<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.secret_refs`

Required:

- `mount_point` (String) MountPoint is the filesystem path where the volume will be mounted.
- `name` (String) Name is the name of the referenced ConfigMap or Secret object. It must conform to DNS label standards.
- `secret` (Attributes) Secret specifies the secret to be mounted as a volume. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs--secret))

Optional:

- `as_volume_from` (List of String) AsVolumeFrom lists the names of containers in which the volume should be mounted.
- `sub_path` (String) SubPath specifies a path within the volume from which to mount.

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs--secret"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.secret_refs.sub_path`

Optional:

- `default_mode` (Number) defaultMode is Optional: mode bits used to set permissions on created files by default. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. Defaults to 0644. Directories within the path are not affected by this setting. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.
- `items` (Attributes List) items If unspecified, each key-value pair in the Data field of the referenced Secret will be projected into the volume as a file whose name is the key and content is the value. If specified, the listed keys will be projected into the specified paths, and unlisted keys will not be present. If a key is specified which is not present in the Secret, the volume setup will error unless it is marked optional. Paths must be relative and may not contain the '..' path or start with '..'. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs--sub_path--items))
- `optional` (Boolean) optional field specify whether the Secret or its keys must be defined
- `secret_name` (String) secretName is the name of the secret in the pod's namespace to use. More info: https://kubernetes.io/docs/concepts/storage/volumes#secret

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--secret_refs--sub_path--items"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.secret_refs.sub_path.secret_name`

Required:

- `key` (String) key is the key to project.
- `path` (String) path is the relative path of the file to map the key to. May not be an absolute path. May not contain the path element '..'. May not start with the string '..'.

Optional:

- `mode` (Number) mode is Optional: mode bits used to set permissions on this file. Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511. YAML accepts both octal and decimal values, JSON requires decimal values for mode bits. If not specified, the volume defaultMode will be used. This might be in conflict with other options that affect the file mode, like fsGroup, and the result can be other mode bits set.





<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates`

Required:

- `name` (String) Refers to 'clusterDefinition.spec.componentDefs.containers.volumeMounts.name'.

Optional:

- `spec` (Attributes) Defines the desired characteristics of a volume requested by a pod author. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--spec))

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--spec"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.spec`

Optional:

- `access_modes` (Map of String) Contains the desired access modes the volume should have. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#access-modes-1.
- `resources` (Attributes) Represents the minimum resources the volume should have. If the RecoverVolumeExpansionFailure feature is enabled, users are allowed to specify resource requirements that are lower than the previous value but must still be higher than the capacity recorded in the status field of the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#resources. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--spec--resources))
- `storage_class_name` (String) The name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1.
- `volume_mode` (String) Defines what type of volume is required by the claim.

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--spec--resources"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.spec.volume_mode`

Optional:

- `claims` (Attributes List) Claims lists the names of resources, defined in spec.resourceClaims, that are used by this container.  This is an alpha field and requires enabling the DynamicResourceAllocation feature gate.  This field is immutable. It can only be set for containers. (see [below for nested schema](#nestedatt--spec--sharding_specs--template--volume_claim_templates--spec--volume_mode--claims))
- `limits` (Map of String) Limits describes the maximum amount of compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
- `requests` (Map of String) Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

<a id="nestedatt--spec--sharding_specs--template--volume_claim_templates--spec--volume_mode--claims"></a>
### Nested Schema for `spec.sharding_specs.template.volume_claim_templates.spec.volume_mode.requests`

Required:

- `name` (String) Name must match the name of one entry in pod.spec.resourceClaims of the Pod where this field is used. It makes that resource available inside a container.







<a id="nestedatt--spec--storage"></a>
### Nested Schema for `spec.storage`

Optional:

- `size` (String) Specifies the amount of storage the cluster needs. For more information, refer to: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
