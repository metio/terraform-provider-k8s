---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "k8s_networking_istio_io_virtual_service_v1beta1_manifest Data Source - terraform-provider-k8s"
subcategory: "networking.istio.io"
description: |-
  
---

# k8s_networking_istio_io_virtual_service_v1beta1_manifest (Data Source)



## Example Usage

```terraform
data "k8s_networking_istio_io_virtual_service_v1beta1_manifest" "example" {
  metadata = {
    name      = "some-name"
    namespace = "some-namespace"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) Data that helps uniquely identify this object. See https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#metadata for more details. (see [below for nested schema](#nestedatt--metadata))

### Optional

- `spec` (Attributes) Configuration affecting label/content routing, sni routing, etc. See more details at: https://istio.io/docs/reference/config/networking/virtual-service.html (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `id` (String) Contains the value `metadata.namespace/metadata.name`.
- `yaml` (String) The generated manifest in YAML format.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Unique identifier for this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names for more details.
- `namespace` (String) Namespaces provides a mechanism for isolating groups of resources within a single cluster. See https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/ for more details.

Optional:

- `annotations` (Map of String) Keys and values that can be used by external tooling to store and retrieve arbitrary metadata about this object. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more details.
- `labels` (Map of String) Keys and values that can be used to organize and categorize objects. See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/ for more details.


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Optional:

- `export_to` (List of String) A list of namespaces to which this virtual service is exported.
- `gateways` (List of String) The names of gateways and sidecars that should apply these routes.
- `hosts` (List of String) The destination hosts to which traffic is being sent.
- `http` (Attributes List) An ordered list of route rules for HTTP traffic. (see [below for nested schema](#nestedatt--spec--http))
- `tcp` (Attributes List) An ordered list of route rules for opaque TCP traffic. (see [below for nested schema](#nestedatt--spec--tcp))
- `tls` (Attributes List) An ordered list of route rule for non-terminated TLS & HTTPS traffic. (see [below for nested schema](#nestedatt--spec--tls))

<a id="nestedatt--spec--http"></a>
### Nested Schema for `spec.http`

Optional:

- `cors_policy` (Attributes) Cross-Origin Resource Sharing policy (CORS). (see [below for nested schema](#nestedatt--spec--http--cors_policy))
- `delegate` (Attributes) Delegate is used to specify the particular VirtualService which can be used to define delegate HTTPRoute. (see [below for nested schema](#nestedatt--spec--http--delegate))
- `direct_response` (Attributes) A HTTP rule can either return a direct_response, redirect or forward (default) traffic. (see [below for nested schema](#nestedatt--spec--http--direct_response))
- `fault` (Attributes) Fault injection policy to apply on HTTP traffic at the client side. (see [below for nested schema](#nestedatt--spec--http--fault))
- `headers` (Attributes) (see [below for nested schema](#nestedatt--spec--http--headers))
- `match` (Attributes List) Match conditions to be satisfied for the rule to be activated. (see [below for nested schema](#nestedatt--spec--http--match))
- `mirror` (Attributes) Mirror HTTP traffic to a another destination in addition to forwarding the requests to the intended destination. (see [below for nested schema](#nestedatt--spec--http--mirror))
- `mirror_percent` (Number)
- `mirror_percentage` (Attributes) Percentage of the traffic to be mirrored by the 'mirror' field. (see [below for nested schema](#nestedatt--spec--http--mirror_percentage))
- `mirrors` (Attributes List) Specifies the destinations to mirror HTTP traffic in addition to the original destination. (see [below for nested schema](#nestedatt--spec--http--mirrors))
- `name` (String) The name assigned to the route for debugging purposes.
- `redirect` (Attributes) A HTTP rule can either return a direct_response, redirect or forward (default) traffic. (see [below for nested schema](#nestedatt--spec--http--redirect))
- `retries` (Attributes) Retry policy for HTTP requests. (see [below for nested schema](#nestedatt--spec--http--retries))
- `rewrite` (Attributes) Rewrite HTTP URIs and Authority headers. (see [below for nested schema](#nestedatt--spec--http--rewrite))
- `route` (Attributes List) A HTTP rule can either return a direct_response, redirect or forward (default) traffic. (see [below for nested schema](#nestedatt--spec--http--route))
- `timeout` (String) Timeout for HTTP requests, default is disabled.

<a id="nestedatt--spec--http--cors_policy"></a>
### Nested Schema for `spec.http.cors_policy`

Optional:

- `allow_credentials` (Boolean) Indicates whether the caller is allowed to send the actual request (not the preflight) using credentials.
- `allow_headers` (List of String) List of HTTP headers that can be used when requesting the resource.
- `allow_methods` (List of String) List of HTTP methods allowed to access the resource.
- `allow_origin` (List of String)
- `allow_origins` (Attributes List) String patterns that match allowed origins. (see [below for nested schema](#nestedatt--spec--http--cors_policy--allow_origins))
- `expose_headers` (List of String) A list of HTTP headers that the browsers are allowed to access.
- `max_age` (String) Specifies how long the results of a preflight request can be cached.

<a id="nestedatt--spec--http--cors_policy--allow_origins"></a>
### Nested Schema for `spec.http.cors_policy.max_age`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).



<a id="nestedatt--spec--http--delegate"></a>
### Nested Schema for `spec.http.delegate`

Optional:

- `name` (String) Name specifies the name of the delegate VirtualService.
- `namespace` (String) Namespace specifies the namespace where the delegate VirtualService resides.


<a id="nestedatt--spec--http--direct_response"></a>
### Nested Schema for `spec.http.direct_response`

Required:

- `status` (Number) Specifies the HTTP response status to be returned.

Optional:

- `body` (Attributes) Specifies the content of the response body. (see [below for nested schema](#nestedatt--spec--http--direct_response--body))

<a id="nestedatt--spec--http--direct_response--body"></a>
### Nested Schema for `spec.http.direct_response.body`

Optional:

- `bytes` (String) response body as base64 encoded bytes.
- `string` (String)



<a id="nestedatt--spec--http--fault"></a>
### Nested Schema for `spec.http.fault`

Optional:

- `abort` (Attributes) Abort Http request attempts and return error codes back to downstream service, giving the impression that the upstream service is faulty. (see [below for nested schema](#nestedatt--spec--http--fault--abort))
- `delay` (Attributes) Delay requests before forwarding, emulating various failures such as network issues, overloaded upstream service, etc. (see [below for nested schema](#nestedatt--spec--http--fault--delay))

<a id="nestedatt--spec--http--fault--abort"></a>
### Nested Schema for `spec.http.fault.delay`

Optional:

- `grpc_status` (String) GRPC status code to use to abort the request.
- `http2_error` (String)
- `http_status` (Number) HTTP status code to use to abort the Http request.
- `percentage` (Attributes) Percentage of requests to be aborted with the error code provided. (see [below for nested schema](#nestedatt--spec--http--fault--delay--percentage))

<a id="nestedatt--spec--http--fault--delay--percentage"></a>
### Nested Schema for `spec.http.fault.delay.percentage`

Optional:

- `value` (Number)



<a id="nestedatt--spec--http--fault--delay"></a>
### Nested Schema for `spec.http.fault.delay`

Optional:

- `exponential_delay` (String)
- `fixed_delay` (String) Add a fixed delay before forwarding the request.
- `percent` (Number) Percentage of requests on which the delay will be injected (0-100).
- `percentage` (Attributes) Percentage of requests on which the delay will be injected. (see [below for nested schema](#nestedatt--spec--http--fault--delay--percentage))

<a id="nestedatt--spec--http--fault--delay--percentage"></a>
### Nested Schema for `spec.http.fault.delay.percentage`

Optional:

- `value` (Number)




<a id="nestedatt--spec--http--headers"></a>
### Nested Schema for `spec.http.headers`

Optional:

- `request` (Attributes) (see [below for nested schema](#nestedatt--spec--http--headers--request))
- `response` (Attributes) (see [below for nested schema](#nestedatt--spec--http--headers--response))

<a id="nestedatt--spec--http--headers--request"></a>
### Nested Schema for `spec.http.headers.response`

Optional:

- `add` (Map of String)
- `remove` (List of String)
- `set` (Map of String)


<a id="nestedatt--spec--http--headers--response"></a>
### Nested Schema for `spec.http.headers.response`

Optional:

- `add` (Map of String)
- `remove` (List of String)
- `set` (Map of String)



<a id="nestedatt--spec--http--match"></a>
### Nested Schema for `spec.http.match`

Optional:

- `authority` (Attributes) HTTP Authority values are case-sensitive and formatted as follows: - 'exact: 'value'' for exact string match - 'prefix: 'value'' for prefix-based match - 'regex: 'value'' for RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax). (see [below for nested schema](#nestedatt--spec--http--match--authority))
- `gateways` (List of String) Names of gateways where the rule should be applied.
- `headers` (Attributes) The header keys must be lowercase and use hyphen as the separator, e.g. (see [below for nested schema](#nestedatt--spec--http--match--headers))
- `ignore_uri_case` (Boolean) Flag to specify whether the URI matching should be case-insensitive.
- `method` (Attributes) HTTP Method values are case-sensitive and formatted as follows: - 'exact: 'value'' for exact string match - 'prefix: 'value'' for prefix-based match - 'regex: 'value'' for RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax). (see [below for nested schema](#nestedatt--spec--http--match--method))
- `name` (String) The name assigned to a match.
- `port` (Number) Specifies the ports on the host that is being addressed.
- `query_params` (Attributes) Query parameters for matching. (see [below for nested schema](#nestedatt--spec--http--match--query_params))
- `scheme` (Attributes) URI Scheme values are case-sensitive and formatted as follows: - 'exact: 'value'' for exact string match - 'prefix: 'value'' for prefix-based match - 'regex: 'value'' for RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax). (see [below for nested schema](#nestedatt--spec--http--match--scheme))
- `source_labels` (Map of String) One or more labels that constrain the applicability of a rule to source (client) workloads with the given labels.
- `source_namespace` (String) Source namespace constraining the applicability of a rule to workloads in that namespace.
- `stat_prefix` (String) The human readable prefix to use when emitting statistics for this route.
- `uri` (Attributes) URI to match values are case-sensitive and formatted as follows: - 'exact: 'value'' for exact string match - 'prefix: 'value'' for prefix-based match - 'regex: 'value'' for RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax). (see [below for nested schema](#nestedatt--spec--http--match--uri))
- `without_headers` (Attributes) withoutHeader has the same syntax with the header, but has opposite meaning. (see [below for nested schema](#nestedatt--spec--http--match--without_headers))

<a id="nestedatt--spec--http--match--authority"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--headers"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--method"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--query_params"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--scheme"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--uri"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).


<a id="nestedatt--spec--http--match--without_headers"></a>
### Nested Schema for `spec.http.match.without_headers`

Optional:

- `exact` (String)
- `prefix` (String)
- `regex` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).



<a id="nestedatt--spec--http--mirror"></a>
### Nested Schema for `spec.http.mirror`

Required:

- `host` (String) The name of a service from the service registry.

Optional:

- `port` (Attributes) Specifies the port on the host that is being addressed. (see [below for nested schema](#nestedatt--spec--http--mirror--port))
- `subset` (String) The name of a subset within the service.

<a id="nestedatt--spec--http--mirror--port"></a>
### Nested Schema for `spec.http.mirror.subset`

Optional:

- `number` (Number)



<a id="nestedatt--spec--http--mirror_percentage"></a>
### Nested Schema for `spec.http.mirror_percentage`

Optional:

- `value` (Number)


<a id="nestedatt--spec--http--mirrors"></a>
### Nested Schema for `spec.http.mirrors`

Required:

- `destination` (Attributes) Destination specifies the target of the mirror operation. (see [below for nested schema](#nestedatt--spec--http--mirrors--destination))

Optional:

- `percentage` (Attributes) Percentage of the traffic to be mirrored by the 'destination' field. (see [below for nested schema](#nestedatt--spec--http--mirrors--percentage))

<a id="nestedatt--spec--http--mirrors--destination"></a>
### Nested Schema for `spec.http.mirrors.percentage`

Required:

- `host` (String) The name of a service from the service registry.

Optional:

- `port` (Attributes) Specifies the port on the host that is being addressed. (see [below for nested schema](#nestedatt--spec--http--mirrors--percentage--port))
- `subset` (String) The name of a subset within the service.

<a id="nestedatt--spec--http--mirrors--percentage--port"></a>
### Nested Schema for `spec.http.mirrors.percentage.port`

Optional:

- `number` (Number)



<a id="nestedatt--spec--http--mirrors--percentage"></a>
### Nested Schema for `spec.http.mirrors.percentage`

Optional:

- `value` (Number)



<a id="nestedatt--spec--http--redirect"></a>
### Nested Schema for `spec.http.redirect`

Optional:

- `authority` (String) On a redirect, overwrite the Authority/Host portion of the URL with this value.
- `derive_port` (String) On a redirect, dynamically set the port: * FROM_PROTOCOL_DEFAULT: automatically set to 80 for HTTP and 443 for HTTPS.Valid Options: FROM_PROTOCOL_DEFAULT, FROM_REQUEST_PORT
- `port` (Number) On a redirect, overwrite the port portion of the URL with this value.
- `redirect_code` (Number) On a redirect, Specifies the HTTP status code to use in the redirect response.
- `scheme` (String) On a redirect, overwrite the scheme portion of the URL with this value.
- `uri` (String) On a redirect, overwrite the Path portion of the URL with this value.


<a id="nestedatt--spec--http--retries"></a>
### Nested Schema for `spec.http.retries`

Optional:

- `attempts` (Number) Number of retries to be allowed for a given request.
- `per_try_timeout` (String) Timeout per attempt for a given request, including the initial call and any retries.
- `retry_on` (String) Specifies the conditions under which retry takes place.
- `retry_remote_localities` (Boolean) Flag to specify whether the retries should retry to other localities.


<a id="nestedatt--spec--http--rewrite"></a>
### Nested Schema for `spec.http.rewrite`

Optional:

- `authority` (String) rewrite the Authority/Host header with this value.
- `uri` (String) rewrite the path (or the prefix) portion of the URI with this value.
- `uri_regex_rewrite` (Attributes) rewrite the path portion of the URI with the specified regex. (see [below for nested schema](#nestedatt--spec--http--rewrite--uri_regex_rewrite))

<a id="nestedatt--spec--http--rewrite--uri_regex_rewrite"></a>
### Nested Schema for `spec.http.rewrite.uri_regex_rewrite`

Optional:

- `match` (String) RE2 style regex-based match (https://github.com/google/re2/wiki/Syntax).
- `rewrite` (String) The string that should replace into matching portions of original URI.



<a id="nestedatt--spec--http--route"></a>
### Nested Schema for `spec.http.route`

Required:

- `destination` (Attributes) Destination uniquely identifies the instances of a service to which the request/connection should be forwarded to. (see [below for nested schema](#nestedatt--spec--http--route--destination))

Optional:

- `headers` (Attributes) (see [below for nested schema](#nestedatt--spec--http--route--headers))
- `weight` (Number) Weight specifies the relative proportion of traffic to be forwarded to the destination.

<a id="nestedatt--spec--http--route--destination"></a>
### Nested Schema for `spec.http.route.weight`

Required:

- `host` (String) The name of a service from the service registry.

Optional:

- `port` (Attributes) Specifies the port on the host that is being addressed. (see [below for nested schema](#nestedatt--spec--http--route--weight--port))
- `subset` (String) The name of a subset within the service.

<a id="nestedatt--spec--http--route--weight--port"></a>
### Nested Schema for `spec.http.route.weight.port`

Optional:

- `number` (Number)



<a id="nestedatt--spec--http--route--headers"></a>
### Nested Schema for `spec.http.route.weight`

Optional:

- `request` (Attributes) (see [below for nested schema](#nestedatt--spec--http--route--weight--request))
- `response` (Attributes) (see [below for nested schema](#nestedatt--spec--http--route--weight--response))

<a id="nestedatt--spec--http--route--weight--request"></a>
### Nested Schema for `spec.http.route.weight.request`

Optional:

- `add` (Map of String)
- `remove` (List of String)
- `set` (Map of String)


<a id="nestedatt--spec--http--route--weight--response"></a>
### Nested Schema for `spec.http.route.weight.response`

Optional:

- `add` (Map of String)
- `remove` (List of String)
- `set` (Map of String)





<a id="nestedatt--spec--tcp"></a>
### Nested Schema for `spec.tcp`

Optional:

- `match` (Attributes List) Match conditions to be satisfied for the rule to be activated. (see [below for nested schema](#nestedatt--spec--tcp--match))
- `route` (Attributes List) The destination to which the connection should be forwarded to. (see [below for nested schema](#nestedatt--spec--tcp--route))

<a id="nestedatt--spec--tcp--match"></a>
### Nested Schema for `spec.tcp.match`

Optional:

- `destination_subnets` (List of String) IPv4 or IPv6 ip addresses of destination with optional subnet.
- `gateways` (List of String) Names of gateways where the rule should be applied.
- `port` (Number) Specifies the port on the host that is being addressed.
- `source_labels` (Map of String) One or more labels that constrain the applicability of a rule to workloads with the given labels.
- `source_namespace` (String) Source namespace constraining the applicability of a rule to workloads in that namespace.
- `source_subnet` (String)


<a id="nestedatt--spec--tcp--route"></a>
### Nested Schema for `spec.tcp.route`

Required:

- `destination` (Attributes) Destination uniquely identifies the instances of a service to which the request/connection should be forwarded to. (see [below for nested schema](#nestedatt--spec--tcp--route--destination))

Optional:

- `weight` (Number) Weight specifies the relative proportion of traffic to be forwarded to the destination.

<a id="nestedatt--spec--tcp--route--destination"></a>
### Nested Schema for `spec.tcp.route.weight`

Required:

- `host` (String) The name of a service from the service registry.

Optional:

- `port` (Attributes) Specifies the port on the host that is being addressed. (see [below for nested schema](#nestedatt--spec--tcp--route--weight--port))
- `subset` (String) The name of a subset within the service.

<a id="nestedatt--spec--tcp--route--weight--port"></a>
### Nested Schema for `spec.tcp.route.weight.port`

Optional:

- `number` (Number)





<a id="nestedatt--spec--tls"></a>
### Nested Schema for `spec.tls`

Required:

- `match` (Attributes List) Match conditions to be satisfied for the rule to be activated. (see [below for nested schema](#nestedatt--spec--tls--match))

Optional:

- `route` (Attributes List) The destination to which the connection should be forwarded to. (see [below for nested schema](#nestedatt--spec--tls--route))

<a id="nestedatt--spec--tls--match"></a>
### Nested Schema for `spec.tls.match`

Required:

- `sni_hosts` (List of String) SNI (server name indicator) to match on.

Optional:

- `destination_subnets` (List of String) IPv4 or IPv6 ip addresses of destination with optional subnet.
- `gateways` (List of String) Names of gateways where the rule should be applied.
- `port` (Number) Specifies the port on the host that is being addressed.
- `source_labels` (Map of String) One or more labels that constrain the applicability of a rule to workloads with the given labels.
- `source_namespace` (String) Source namespace constraining the applicability of a rule to workloads in that namespace.


<a id="nestedatt--spec--tls--route"></a>
### Nested Schema for `spec.tls.route`

Required:

- `destination` (Attributes) Destination uniquely identifies the instances of a service to which the request/connection should be forwarded to. (see [below for nested schema](#nestedatt--spec--tls--route--destination))

Optional:

- `weight` (Number) Weight specifies the relative proportion of traffic to be forwarded to the destination.

<a id="nestedatt--spec--tls--route--destination"></a>
### Nested Schema for `spec.tls.route.weight`

Required:

- `host` (String) The name of a service from the service registry.

Optional:

- `port` (Attributes) Specifies the port on the host that is being addressed. (see [below for nested schema](#nestedatt--spec--tls--route--weight--port))
- `subset` (String) The name of a subset within the service.

<a id="nestedatt--spec--tls--route--weight--port"></a>
### Nested Schema for `spec.tls.route.weight.port`

Optional:

- `number` (Number)
